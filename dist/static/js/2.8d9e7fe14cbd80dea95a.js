webpackJsonp([2,27,28,30,49,50],{"1IU1":function(e,t){},"5Vrs":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"ringtoneConfiguration",data:function(){return{tableData:[],centerDialogVisible:!1,centerDialogVisibleEit:!1,ruleForm:{name:"",region:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}]},options:[{value:"HTML",label:"HTML"},{value:"CSS",label:"CSS"},{value:"JavaScript",label:"JavaScript"}],value:[]}},methods:{musicAdd:function(){this.$router.push({name:"earlyWarningLightAdd"})},handleClick:function(){this.centerDialogVisibleEit=!0},removeDomainDelEit:function(){this.centerDialogVisibleEit=!1},handleCloseEsc:function(){this.centerDialogVisibleEit=!1,this.$refs.ruleForm.resetFields()},delMusic:function(){this.centerDialogVisible=!0},removeDomainDel:function(){this.centerDialogVisible=!1,console.log("删除了")}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticStyle:{margin:"20px 0","background-color":"#169bd5",color:"#fff"},on:{click:function(t){return t.preventDefault(),e.musicAdd.apply(null,arguments)}}},[e._v("新增预警灯配置")]),e._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[e._l(e.tableData,function(e,t){return[a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.title,"min-width":e.minWidth,"show-overflow-tooltip":!0}})]}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"铃声预览",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.musicPre(t.row)}}},[e._v("铃声预览")])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.delMusic(t.row)}}},[e._v("删除")])]}}])})],2)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.page,"page-sizes":[15,30,50,100],"page-size":e.pageSize,layout:"prev, pager, next, sizes,total",total:e.total,"hide-on-single-page":e.total<15},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑提示",visible:e.centerDialogVisibleEit,width:"30%"},on:{"update:visible":function(t){e.centerDialogVisibleEit=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"活动区域",prop:"region"}},[a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择文章标签"},model:{value:e.ruleForm.region,callback:function(t){e.$set(e.ruleForm,"region",t)},expression:"ruleForm.region"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"铃声预览",prop:""}},[a("el-input",{staticStyle:{width:"auto"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}}),e._v(" "),a("el-button",{staticStyle:{border:"0","vertical-align":"middle"},attrs:{size:"mini"}},[a("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"red","font-size":"xx-large"}})]),e._v(" "),a("span",[e._v("时间")])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCloseEsc}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.removeDomainDelEit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"删除提示",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("span",[e._v("是否确定进行删除")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.removeDomainDel}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(i,s,!1,function(e){a("m/Y9")},"data-v-3dd3b39f",null);t.default=r.exports},AU49:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),r=a("exGp"),n=a.n(r),l=a("gyMJ"),o={name:"deckArrangement",data:function(){return{total:0,page:1,pageSize:10,tableHeight:window.innerHeight-180,centerDialogVisible:!1,centerDialogVisibleEit:!1,ruleForm:{name:"",region:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}]},tableHead:[{title:"序号",prop:"id",width:"90"},{title:"设备名称",prop:"device_name",minWidth:"150"},{title:"设备所在位置",prop:"location_name",minWidth:"120"},{title:"播放预览",prop:"file",minWidth:"300"}],tableHeads:[{title:"素材名称",prop:"title",minWidth:"100"},{title:"素材时长",prop:"duration",minWidth:"100"}],title:"",options:[],value:[],fileList:[],centerDialogVisiblePhotoImg:!1,tableData:[],multipleSelection:[],baseUrl:"",hash:"",dialogVisible:!1,showTypeList:[],showTitle:"选择图片",previewData:[],showTypeVisible:!1,keyword:"",showNodeData:[],screen:[],screenVisible:!1,isSelectAll:!1,nodeData:[],defaultProps:{children:"children",label:"device_name"},tableHeadCopy:[]}},mounted:function(){this.baseUrl="http://xwcs.xyruxue.com/",localStorage.getItem("Rehearsal_Id")&&this.getList(),this.getHash(),this.resView()},methods:{handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.page=e,this.getList()},videoClick:function(e){window.open(e,"_blank")},getHash:function(){var e=this;return n()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post(l._20,{page_hash:"screenConfiguration"});case 2:1==(a=t.sent).data.code?e.hash=a.data.data:e.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return t.stop()}},t,e)}))()},selectAll:function(){this.isSelectAll?this.$refs.tree.setCheckedNodes(this.nodeData):this.$refs.tree.setCheckedNodes([])},getRowKey:function(e){return e.id},cellClick:function(e,t,a,i){2==e.file_type&&"right"==t.fixed&&window.open(this.baseUrl+e.file_path,"_blank")},screenClick:function(){var e=this;this.resView(),this.screenVisible=!0,this.isSelectAll=!1,this.$nextTick(function(){e.screen.length>0&&e.getNodeData(e.screen)})},showChange:function(e){this.file_ids=[],this.previewData=[],1==e?this.showTitle="选择图片":2==e&&(this.showTitle="选择视频")},showClick:function(){var e=this;this.keyword="",this.resView(),1==this.ruleForm.show_type?this.tableHeads=this.tableHeads.filter(function(e){return"素材时长"!==e.title}):this.tableHead=this.tableHeadCopy,this.showTypeVisible=!0,this.$nextTick(function(){e.previewData.forEach(function(t){void 0!==e.showNodeData.find(function(e){return e.id==t.id})&&e.$refs.multipleTable.toggleRowSelection(e.showNodeData.find(function(e){return e.id==t.id}),!0)})})},resetForm:function(){var e=this;this.ruleForm={screen_name:"",frequency:"",screen_type:"",show_type:""},this.showType=[],this.screen=[],this.$nextTick(function(){e.$refs.ruleForm.resetFields()})},screenSubmit:function(){this.screen=this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys()),this.screenVisible=!1},getInfo:function(e){var t=this;return n()(s.a.mark(function a(){var i,r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.axios.post(l._125,{id:e});case 2:1==(i=a.sent).data.code?(t.ruleForm=i.data.data,t.device_ids=i.data.data.list,t.screen=i.data.data.list,t.file_ids=i.data.data.file_ids.length>0?i.data.data.file_ids.split(","):[],1==i.data.data.show_type?t.showTitle="选择图片":2==i.data.data.show_type&&(t.showTitle="选择视频"),t.dis=i.data.data.file_data,t.previewData=i.data.data.file_data,r=0,t.previewData.forEach(function(e,t){void 0!==e&&(r+=e.file_length)}),t.timestr=t.timeChange(r),t.resView()):t.$message({showClose:!0,message:i.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,t)}))()},select:function(e){var t=this,a=[];e.length>0?e.forEach(function(i,s){i.file_type==t.ruleForm.show_type?a.push(i):e.splice(s,1)}):a=e,this.previewData=a,a.length>0?(this.file_ids=[],a.forEach(function(e){void 0!==e&&t.file_ids.push(e.id)})):this.file_ids=[];var i=0;this.previewData.forEach(function(e,t){void 0!==e&&2==e.file_type&&(i+=e.file_length)}),this.timestr=this.timeChange(i)},resView:function(){var e=this;return n()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={device_type:"2",file_type:e.ruleForm.show_type?e.ruleForm.show_type:"",title:e.keyword},t.next=3,e.axios.post(l._0,a);case 3:1==(i=t.sent).data.code?(e.nodeData=i.data.data.device_list,e.showNodeData="[object Object]"===Object.prototype.toString.call(i.data.data.file_list)?i.data.data.file_list.data:[],e.showTypeList=i.data.data.show_type_list):e.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},getNodeData:function(e){var t=this;return n()(s.a.mark(function a(){var i,r,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.nodeData=[],i={device_type:"2",file_type:t.ruleForm.show_type?t.ruleForm.show_type:"",title:t.keyword},a.next=4,t.axios.post(l._0,i);case 4:1==(r=a.sent).data.code?(t.nodeData=r.data.data.device_list,e?t.$nextTick(function(){var t=this;this.$refs.tree.setCheckedKeys([]),e.forEach(function(e){var a=t.$refs.tree.getNode(e);a&&t.$refs.tree.setChecked(a,!0)})}):(n=[],t.nodeData.forEach(function(e){n.push(e.device_id),e.children&&e.children.forEach(function(e){n.push(e.device_id)})}),t.$nextTick(function(){this.$refs.tree.setCheckedKeys(n)}))):t.$message({showClose:!0,message:r.data.msg,type:"error"});case 6:case"end":return a.stop()}},a,t)}))()},pinmuAdd:function(){this.title="新增屏幕配置",this.dialogVisible=!0,this.resetForm()},getList:function(){var e=this;return n()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={rehearsal_id:JSON.parse(localStorage.getItem("Rehearsal_Id")),curr:e.page,pageSize:e.pageSize},t.next=3,e.axios.post(l._126,a);case 3:1==(i=t.sent).data.code?e.tableData=i.data.data.data:e.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},handleEit:function(e){var t=this;this.title="编辑屏幕配置",this.infoId=e.id,this.dialogVisible=!0,this.resetForm(),this.$nextTick(function(){t.getInfo(e.id)})},submitForm:function(){var e,t=this;this.$refs.ruleForm.validate((e=n()(s.a.mark(function e(a){var i,r,n,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.next=3,t.getHash();case 3:return i=new RegExp(/^[0-9]*$/),r=[],t.screen.forEach(function(e){i.test(e)&&r.push(e)}),n={rehearsal_id:JSON.parse(localStorage.getItem("Rehearsal_Id")),show_type:t.ruleForm.show_type,file_ids:t.file_ids.join(","),device_ids:r.join(","),hash:t.hash},o=void 0,"编辑屏幕配置"==t.title?(o=l._124,n.id=t.infoId):o=l._122,e.next=12,t.axios.post(o,n);case 12:1==(c=e.sent).data.code?(t.$message({showClose:!0,message:c.data.msg,type:"success"}),t.dialogVisible=!1):t.$message({showClose:!0,message:c.data.msg,type:"error"}),t.getList(),t.getHash();case 16:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},timeChange:function(e){var t=parseInt(e),a=Math.floor(t/86400)<10?"0"+Math.floor(t/86400):Math.floor(t/86400),i=Math.floor(t/3600%24)<10?"0"+Math.floor(t/3600%24):Math.floor(t/3600%24),s=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),r=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60),n="";return"00"!==a&&(n+=a+"天"),"00"!==i&&(n+=i+"时"),"00"!==s&&(n+=s+"分"),n+=r+"秒"},handleClickDel:function(e){var t=this;this.$confirm("是否确定进行删除","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e,hash:t.hash};t.axios.post(l._123,a).then(function(e){1==e.data.code?(t.$notify.success({showClose:!0,message:e.data.msg,type:"success"}),(t.total-1)%t.pageSize==0&&t.total>1&&(t.page-=1),t.getList()):t.$notify.error({title:"失败",message:e.data.msg})});t.getHash()}).catch(function(e){t.$notify.error({title:"失败",message:"取消操作"})})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"deckArrangement"},[a("el-button",{staticStyle:{margin:"20px 10px"},attrs:{size:"small",type:"primary"},on:{click:function(t){return t.preventDefault(),e.pinmuAdd.apply(null,arguments)}}},[e._v("新增屏幕配置")]),e._v(" "),a("div",[e._v("\n            已选设备\n        ")]),e._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)","max-height":e.tableHeight,size:"medium"}},[e._l(e.tableHead,function(t,i){return["file"!=t.prop?a("el-table-column",{key:i,attrs:{prop:t.prop,width:t.width,align:"center",label:t.title,"min-width":t.minWidth,"show-overflow-tooltip":!0}}):a("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.title,"min-width":t.minWidth,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.file_data,function(t,i){return a("span",{key:i,staticStyle:{"margin-right":"10px"}},[1==t.file_type?a("el-image",{staticStyle:{width:"18px",height:"18px"},attrs:{src:e.baseUrl+t.file_small,"preview-src-list":[e.baseUrl+t.file_path]}}):2==t.file_type?a("video",{attrs:{src:e.baseUrl+t.file_path,height:"18px"},on:{click:function(a){return e.videoClick(e.baseUrl+t.file_path)}}}):e._e()],1)})}}],null,!0)})]}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClickDel(t.row.id)}}},[e._v("删除")])]}}])})],2)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.page,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"prev, pager, next, sizes,total",total:e.total,"hide-on-single-page":e.total<10},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备选择"}},[a("el-button",{on:{click:e.screenClick}},[e._v("设备选择")])],1),e._v(" "),a("el-form-item",{attrs:{label:"素材类型",prop:"show_type"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.showChange},model:{value:e.ruleForm.show_type,callback:function(t){e.$set(e.ruleForm,"show_type",t)},expression:"ruleForm.show_type"}},e._l(e.showTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.showTitle}},[a("el-button",{on:{click:e.showClick}},[e._v("素材选择")])],1),e._v(" "),a("el-form-item",[2==e.ruleForm.show_type&&e.previewData.length>0?a("div",[e._v("\n                        "+e._s("目前播放时长："+e.timestr)+"\n                    ")]):e._e(),e._v(" "),e.previewData.length>0?a("div",[e._l(e.previewData,function(t,i){return[1==e.ruleForm.show_type&&"undefined"!=t?a("span",{key:i,staticClass:"par"},[a("el-image",{staticStyle:{width:"100px",height:"100px","margin-right":"5px"},attrs:{src:e.baseUrl+t.file_path,"preview-src-list":[e.baseUrl+t.file_path]}})],1):2==e.ruleForm.show_type&&"undefined"!=t?a("span",{key:i,staticClass:"par"},[a("video",{staticStyle:{"margin-right":"5px"},attrs:{height:"100px",src:e.baseUrl+t.file_path},on:{click:function(a){return e.videoClick(e.baseUrl+t.file_path)}}})]):e._e()]})],2):e._e()]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.showTitle,visible:e.showTypeVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.showTypeVisible=t},close:function(t){e.showTypeVisible=!1}}},[a("el-input",{staticStyle:{width:"30%","margin-bottom":"10px"},attrs:{placeholder:"请输入素材名称",clearable:"",size:"small"},on:{change:e.resView},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.showNodeData,"row-key":e.getRowKey,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)","max-height":e.tableHeight,size:"medium"},on:{"cell-click":e.cellClick,"selection-change":e.select}},[a("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),e._v(" "),e._l(e.tableHeads,function(e,t){return[a("el-table-column",{key:t,attrs:{prop:e.prop,align:"center",label:e.title,"min-width":e.minWidth,"show-overflow-tooltip":!0}})]}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"素材预览",align:"center",fixed:"right","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.file_type?a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.baseUrl+t.row.file_path,"preview-src-list":[e.baseUrl+t.row.file_path]}}):2==t.row.file_type?a("video",{attrs:{src:e.baseUrl+t.row.file_path,height:"50px"}}):e._e()]}}])})],2)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择设备",visible:e.screenVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.screenVisible=t},close:function(t){e.screenVisible=!1}}},[a("el-form",[a("el-form-item",{staticStyle:{display:"block"}},[a("el-checkbox",{on:{change:e.selectAll},model:{value:e.isSelectAll,callback:function(t){e.isSelectAll=t},expression:"isSelectAll"}},[e._v("全选/全不选")]),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.nodeData,"show-checkbox":"","check-on-click-node":"","node-key":"device_id",props:e.defaultProps}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.screenSubmit}},[e._v("提交")])],1)],1)],1)],1)])},staticRenderFns:[]};var d=a("VU/8")(o,c,!1,function(e){a("1IU1")},"data-v-9b10b198",null);t.default=d.exports},BOfO:function(e,t){},Mov9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),r=a("exGp"),n=a.n(r),l=a("bOdI"),o=a.n(l),c=a("gyMJ"),d={name:"deckArrangement",data:function(){var e;return e={total:0,page:1,pageSize:10,tableHeight:window.innerHeight-180,centerDialogVisible:!1,centerDialogVisibleEit:!1,ruleForm:{name:"",region:""},rules:{screen_type:[{required:!0,message:"请选择设备类型",trigger:"change"}],show_type:[{required:!0,message:"请选择素材类型",trigger:"change"}]},tableHead:[{title:"序号",prop:"id",width:"90"},{title:"点位位置",prop:"point_name",width:"150"},{title:"设备名称",prop:"device_name",minWidth:"120"},{title:"设备所在位置",prop:"location_name",minWidth:"120"},{title:"铃声预览",prop:"file",minWidth:"300"}],options:[],value:[],fileList:[],centerDialogVisiblePhotoImg:!1,tableData:[],multipleSelection:[],baseUrl:"",hash:"",title:""},o()(e,"ruleForm",{screen_name:"",frequency:"",screen_type:"",show_type:""}),o()(e,"dis",[]),o()(e,"showNodeData",[]),o()(e,"previewData",[]),o()(e,"dialogVisible",!1),o()(e,"screen",[]),o()(e,"timestr",""),o()(e,"screenVisible",!1),o()(e,"isSelectAll",!1),o()(e,"nodeData",[]),o()(e,"defaultProps",{children:"children",label:"device_name"}),o()(e,"infoId",""),e},mounted:function(){this.baseUrl="http://xwcs.xyruxue.com/",this.getList(),this.getHash(),this.resView()},methods:{handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.page=e,this.getList()},getHash:function(){var e=this;return n()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post(c._20,{page_hash:"screenConfiguration"});case 2:1==(a=t.sent).data.code?e.hash=a.data.data:e.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return t.stop()}},t,e)}))()},resView:function(){var e=this;return n()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={device_type:"4",file_type:3,title:e.keyword},t.next=3,e.axios.post(c._0,a);case 3:1==(i=t.sent).data.code?(e.nodeData=i.data.data.device_list,e.showNodeData="[object Object]"===Object.prototype.toString.call(i.data.data.file_list)?i.data.data.file_list.data:[],e.showTypeList=i.data.data.show_type_list):e.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},selectAll:function(){this.isSelectAll?this.$refs.tree.setCheckedNodes(this.nodeData):this.$refs.tree.setCheckedNodes([])},screenClick:function(){var e=this;this.resView(),this.screenVisible=!0,this.isSelectAll=!1,this.$nextTick(function(){e.screen.length>0&&e.getNodeData(e.screen)})},getNodeData:function(e){var t=this;return n()(s.a.mark(function a(){var i,r,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.nodeData=[],i={device_type:"4",file_type:3,title:t.keyword},a.next=4,t.axios.post(c._0,i);case 4:1==(r=a.sent).data.code?(t.nodeData=r.data.data.device_list,e?t.$nextTick(function(){var t=this;this.$refs.tree.setCheckedKeys([]),e.forEach(function(e){var a=t.$refs.tree.getNode(e);a&&t.$refs.tree.setChecked(a,!0)})}):(n=[],t.nodeData.forEach(function(e){n.push(e.device_id),e.children&&e.children.forEach(function(e){n.push(e.device_id)})}),t.$nextTick(function(){this.$refs.tree.setCheckedKeys(n)}))):t.$message({showClose:!0,message:r.data.msg,type:"error"});case 6:case"end":return a.stop()}},a,t)}))()},linChange:function(e){var t=this;if(e.length>5)return this.$message({showClose:!0,message:"铃声素材最多选择五个",type:"error"}),void e.splice(4,e.length-5);this.previewData=[],e.forEach(function(e){t.showNodeData.forEach(function(a){e==a.id&&t.previewData.push(a)})});var a=0;this.previewData.forEach(function(e,t){void 0!==e&&(a+=e.file_length)}),this.timestr=this.timeChange(a)},resetForm:function(){var e=this;this.ruleForm={screen_name:"",frequency:"",screen_type:"",show_type:""},this.showType=[],this.screen=[],this.$nextTick(function(){e.$refs.ruleForm.resetFields()})},screenSubmit:function(){this.screen=this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys()),this.screenVisible=!1},submitForm:function(){var e,t=this;this.$refs.ruleForm.validate((e=n()(s.a.mark(function e(a){var i,r,n,l,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.next=3,t.getHash();case 3:return i=new RegExp(/^[0-9]*$/),r=[],t.screen.forEach(function(e){i.test(e)&&r.push(e)}),n={rehearsal_id:JSON.parse(localStorage.getItem("Rehearsal_Id")),file_ids:t.dis.join(","),device_ids:r.join(","),hash:t.hash},l=void 0,"编辑铃声配置"==t.title?(l=c._83,n.id=t.infoId):l=c._80,e.next=12,t.axios.post(l,n);case 12:1==(o=e.sent).data.code?(t.$message({showClose:!0,message:o.data.msg,type:"success"}),t.dialogVisible=!1):t.$message({showClose:!0,message:o.data.msg,type:"error"}),t.getList(),t.getHash();case 16:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},getInfo:function(e){var t=this;return n()(s.a.mark(function a(){var i,r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.axios.post(c._84,{id:e});case 2:1==(i=a.sent).data.code?(t.ruleForm=i.data.data,t.device_ids=i.data.data.list,t.screen=i.data.data.list,t.dis=i.data.data.file_ids.length>0?i.data.data.file_ids.split(","):[],t.previewData=i.data.data.file_data,r=0,t.previewData.forEach(function(e,t){void 0!==e&&(r+=e.file_length)}),t.timestr=t.timeChange(r),t.resView()):t.$message({showClose:!0,message:i.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,t)}))()},linsAdd:function(){this.title="新增铃声配置",this.dialogVisible=!0,this.resetForm()},getList:function(){var e=this;return n()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={rehearsal_id:JSON.parse(localStorage.getItem("Rehearsal_Id")),curr:e.page,pageSize:e.pageSize},t.next=3,e.axios.post(c._82,a);case 3:1==(i=t.sent).data.code?(e.tableData=i.data.data.data,e.total=i.data.data.total):e.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},handleEit:function(e){var t=this;this.title="编辑铃声配置",this.infoId=e.id,this.dialogVisible=!0,this.resetForm(),this.$nextTick(function(){t.getInfo(e.id)})},handleClickDel:function(e){var t=this;this.$confirm("是否确定进行删除","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e,hash:t.hash};t.axios.post(c._81,a).then(function(e){1==e.data.code?(t.$notify.success({showClose:!0,message:e.data.msg,type:"success"}),(t.total-1)%t.pageSize==0&&t.total>1&&(t.page-=1),t.getList()):t.$notify.error({title:"失败",message:e.data.msg})});t.getHash()}).catch(function(e){t.$notify.error({title:"失败",message:"取消操作"})})},timeChange:function(e){var t=parseInt(e),a=Math.floor(t/86400)<10?"0"+Math.floor(t/86400):Math.floor(t/86400),i=Math.floor(t/3600%24)<10?"0"+Math.floor(t/3600%24):Math.floor(t/3600%24),s=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),r=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60),n="";return"00"!==a&&(n+=a+"天"),"00"!==i&&(n+=i+"时"),"00"!==s&&(n+=s+"分"),n+=r+"秒"}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"deckArrangement"},[a("el-button",{staticStyle:{margin:"20px 10px"},attrs:{size:"small",type:"primary"},on:{click:function(t){return t.preventDefault(),e.linsAdd.apply(null,arguments)}}},[e._v("新增铃声配置")]),e._v(" "),a("div",[e._v("\n            已选设备\n        ")]),e._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)","max-height":e.tableHeight,size:"medium"}},[e._l(e.tableHead,function(t,i){return["file"!=t.prop?a("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.title,width:t.width,"min-width":t.minWidth,"show-overflow-tooltip":!0}}):a("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.title,"min-width":t.minWidth,width:t.width,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.file_data,function(t,i){return a("span",{key:i,staticStyle:{"margin-right":"10px"}},[a("el-link",{attrs:{underline:!1,target:"_blank",type:"primary",href:e.baseUrl+t.file_path}},[e._v(e._s(t.title))])],1)})}}],null,!0)})]}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClickDel(t.row.id)}}},[e._v("删除")])]}}])})],2)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.page,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"prev, pager, next, sizes,total",total:e.total,"hide-on-single-page":e.total<10},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备选择"}},[a("el-button",{on:{click:e.screenClick}},[e._v("设备选择")])],1),e._v(" "),a("el-form-item",{attrs:{label:"选择素材"}},[a("el-select",{attrs:{multiple:"",size:"small",clearable:"",filterable:"",placeholder:"请选择素材"},on:{change:e.linChange},model:{value:e.dis,callback:function(t){e.dis=t},expression:"dis"}},e._l(e.showNodeData,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:String(e.id)}})}),1)],1),e._v(" "),a("el-form-item",[e.previewData.length>0?a("div",[e._v("\n                        "+e._s("目前播放时长："+e.timestr)+"\n                    ")]):e._e(),e._v(" "),e.previewData.length>0?a("div",[e._l(e.previewData,function(t,i){return[a("span",{key:i,staticStyle:{"margin-right":"10px"}},[a("el-link",{attrs:{underline:!1,target:"_blank",type:"primary",href:e.baseUrl+t.file_path}},[e._v(e._s(t.title+".mp3"))])],1)]}),e._v(" "),a("span")],2):e._e()]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择设备",visible:e.screenVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.screenVisible=t},close:function(t){e.screenVisible=!1}}},[a("el-form",[a("el-form-item",{staticStyle:{display:"block"}},[a("el-checkbox",{on:{change:e.selectAll},model:{value:e.isSelectAll,callback:function(t){e.isSelectAll=t},expression:"isSelectAll"}},[e._v("全选/全不选")]),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.nodeData,"show-checkbox":"","check-on-click-node":"","node-key":"device_id",props:e.defaultProps}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.screenSubmit}},[e._v("提交")])],1)],1)],1)],1)])},staticRenderFns:[]};var u=a("VU/8")(d,h,!1,function(e){a("VGbS")},"data-v-957c62e8",null);t.default=u.exports},Q2uZ:function(e,t){},VGbS:function(e,t){},lvvc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),r=a("Xxa5"),n=a.n(r),l=a("exGp"),o=a.n(l),c=a("Mov9"),d=a("zeHc"),h=a("AU49"),u=a("5Vrs"),p=a("qm5W"),f=a("gyMJ"),m={name:"drillManAdd",components:{ringtoneConfiguration1:c.default,deckArrangement1:d.default,screenConfiguration1:h.default,earlyWarningLight1:u.default,switchMent:p.default},data:function(){return{activeName:"first",ruleForm:{title:"",scene:"",domains:[{user_id:"",task:""}]},rules:{title:[{required:!0,message:"请输入演练名称",trigger:"blur"},{max:200,message:"长度在200个字符内",trigger:"blur"}],scene:[{required:!0,message:"请选择场景",trigger:"change"}],user_id:[{required:!0,message:"请选择人员",trigger:"change"}],task:[{required:!0,message:"请输入任务",trigger:"change"}],name:[{required:!0,message:"请输入任务",trigger:"change"}]},dynamicValidateForm:{domains:[{user_id:"",task:""}],email:""},centerDialogVisible:!1,tableData:[],disable:!0,teacherList:[],drillList:[]}},mounted:function(){this.$route.params.id?(this.getInfo(this.$route.params.id),this.disable=!1):localStorage.getItem("Rehearsal_Id")&&(this.getInfo(JSON.parse(localStorage.getItem("Rehearsal_Id"))),this.disable=!1),this.resView()},methods:{backDrill:function(){this.$router.push({name:"drillManagement"})},getInfo:function(e){var t=this;return o()(n.a.mark(function a(){var i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.axios.post(f._152,{id:e});case 2:1==(i=a.sent).data.code?(t.ruleForm=i.data.data,t.dynamicValidateForm.domains=i.data.data.list):t.$message({showClose:!0,message:i.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,t)}))()},goBack:function(){this.$router.go(-1)},peopleChange:function(){var e=[];this.dynamicValidateForm.domains.forEach(function(t){e.push(t.user_id)}),this.teacherList.forEach(function(t){e.includes(t.teacher_id)?t.disabled=!0:t.disabled=!1})},resView:function(){var e=this;return o()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post(f._0);case 2:1==(a=t.sent).data.code?(a.data.data.teacher.forEach(function(e){e.disabled=!1}),e.teacherList=a.data.data.teacher,e.drillList=a.data.data.scene_list):e.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return t.stop()}},t,e)}))()},handleClick:function(e,t){this.activeName=e.name},getHash:function(){var e=this;return o()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post(f._20,{page_hash:"drillManAdd"});case 2:1==(a=t.sent).data.code?e.hash=a.data.data:e.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return t.stop()}},t,e)}))()},submitForm:function(){var e,t=this;this.$refs.ruleForm.validate((e=o()(n.a.mark(function e(a){var i,r,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=10;break}return e.next=3,t.getHash();case 3:return i={title:t.ruleForm.title,task_data:s()(t.dynamicValidateForm.domains),scene:t.ruleForm.scene,hash:t.hash},r=void 0,"edit"==localStorage.getItem("type")||"add"==localStorage.getItem("type")&&localStorage.getItem("Rehearsal_Id")?(i.id=JSON.parse(localStorage.getItem("Rehearsal_Id")),r=f.U):r=f.T,e.next=8,t.axios.post(r,i);case 8:1==(l=e.sent).data.code?(localStorage.setItem("Rehearsal_Id",s()(l.data.rehearsal_id)),t.$message({showClose:!0,message:l.data.msg,type:"success"}),t.dialogFormVisible=!1,t.disable=!1,t.activeName="second"):t.$message({showClose:!0,message:l.data.msg,type:"error"});case 10:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},resetForm:function(){var e=this;this.ruleForm={title:"",scene:"",name:"",task:"",domains:[{user_id:"",task:""}]},this.$nextTick(function(){e.$refs.ruleForm.resetFields()})},addDomain:function(){this.ruleForm.domains=this.dynamicValidateForm.domains.push({user_id:"",task:""})},removeDomain:function(e){var t=this;this.dynamicValidateForm.domains.length>1&&this.$confirm("是否确定进行删除","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.teacherList.forEach(function(t){e.user_id==t.teacher_id&&(t.disabled=!1)});var a=t.dynamicValidateForm.domains.indexOf(e);0!==a&&t.dynamicValidateForm.domains.splice(a,1)}).catch(function(e){t.$notify.info({title:"取消",message:"取消操作"})})},removeDomainDel:function(e){},musicPre:function(){console.log("播放")},delMusic:function(){console.log("delMusic-删除配置音乐")}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"drillManAdd"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"演练分配",name:"first"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"演练名称",prop:"title"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入演练名称"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title","string"==typeof t?t.trim():t)},expression:"ruleForm.title"}})],1),e._v(" "),e._l(e.dynamicValidateForm.domains,function(t){return a("el-form-item",{key:t.key,attrs:{label:"人员任务",prop:""}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择人员"},on:{change:function(t){return e.peopleChange()}},model:{value:t.user_id,callback:function(a){e.$set(t,"user_id",a)},expression:"domain.user_id"}},e._l(e.teacherList,function(e){return a("el-option",{key:e.teacher_id,attrs:{disabled:e.disabled,label:e.teacher_name,value:e.teacher_id}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入人员任务内容"},model:{value:t.task,callback:function(a){e.$set(t,"task","string"==typeof a?a.trim():a)},expression:"domain.task"}}),e._v(" "),a("el-button",{on:{click:function(a){return a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)}),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.addDomain}},[e._v("添加")])],1),e._v(" "),a("el-form-item",{attrs:{label:"场景",prop:"scene"}},[a("el-select",{attrs:{placeholder:"请选择场景"},model:{value:e.ruleForm.scene,callback:function(t){e.$set(e.ruleForm,"scene",t)},expression:"ruleForm.scene"}},e._l(e.drillList,function(e){return a("el-option",{key:e.dictionary_value,attrs:{label:e.dictionary_name,value:Number(e.dictionary_value)}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"10%"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")])],1)],2)],1),e._v(" "),a("el-tab-pane",{staticStyle:{"background-color":"#ffffff","padding-left":"10px","margin-bottom":"50px"},attrs:{label:"铃声配置",disabled:e.disable,name:"second"}},["second"===e.activeName?a("ringtone-configuration-1"):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"班牌配置",disabled:e.disable,name:"third"}},[a("deckArrangement1")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"屏幕配置",disabled:e.disable,name:"fourth"}},[a("screenConfiguration1")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"预警灯配置",disabled:e.disable,name:"fifth"}},[a("switchMent")],1)],1),e._v(" "),a("div",{staticClass:"box"},[a("el-divider"),e._v(" "),a("el-footer",{staticClass:"footer",attrs:{border:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.backDrill}},[e._v("演练管理")])],1)],1)],1)])},staticRenderFns:[]};var v=a("VU/8")(m,g,!1,function(e){a("Q2uZ")},"data-v-ab29f4fa",null);t.default=v.exports},"m/Y9":function(e,t){},qm5W:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),r=a("exGp"),n=a.n(r),l=a("mvHQ"),o=a.n(l),c=a("gyMJ"),d={name:"deckArrangement",data:function(){return{total:0,page:1,pageSize:10,rehearsal_id:"",tableData:[],tableHeight:window.innerHeight-180,tableHead:[{title:"序号",prop:"id",width:"90"},{title:"设备名称",prop:"device_name",minWidth:"120"},{title:"设备所在位置",prop:"location_name",minWidth:"120"}],disabled:!1,title:"",hash:"",centerDialogVisible:!1,centerDialogVisibleEit:!1,ruleForm:{name:"",region:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}]},value:[],fileList:[],centerDialogVisiblePhotoImg:!1,multipleSelection:[],baseUrl:"",dialogVisible:!1,showTypeList:[],showTitle:"选择图片",previewData:[],showTypeVisible:!1,keyword:"",showNodeData:[],screen:[],screenVisible:!1,isSelectAll:!1,nodeData:[],defaultProps:{children:"children",label:"device_name"},tableHeadCopy:[]}},mounted:function(){this.baseUrl="http://xwcs.xyruxue.com/",localStorage.getItem("Rehearsal_Id")&&this.getlist(),this.resView(),this.getHash(),this.tableHeadCopy=JSON.parse(o()(this.tableHead))},methods:{handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getlist()},handleCurrentChange:function(e){this.page=e,this.getlist()},backDrill:function(){this.$router.push({name:"drillManagement"})},selectAll:function(){this.isSelectAll?this.$refs.tree.setCheckedNodes(this.nodeData):this.$refs.tree.setCheckedNodes([])},screenClick:function(){var e=this;this.resView(),this.screenVisible=!0,this.isSelectAll=!1,this.$nextTick(function(){e.screen.length>0&&e.getNodeData(e.screen)})},screenSubmit:function(){this.screen=this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys()),this.screenVisible=!1},getInfo:function(e){var t=this;return n()(s.a.mark(function a(){var i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.axios.post(c._137,{id:e});case 2:1==(i=a.sent).data.code?(t.ruleForm=i.data.data,t.device_ids=i.data.data.list,t.screen=i.data.data.list,t.resView()):t.$message({showClose:!0,message:i.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,t)}))()},resView:function(){var e=this;return n()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={device_type:"6",title:e.keyword},t.next=3,e.axios.post(c._0,a);case 3:1==(i=t.sent).data.code?(e.nodeData=i.data.data.device_list,e.showNodeData="[object Object]"===Object.prototype.toString.call(i.data.data.file_list)?i.data.data.file_list.data:[],e.showTypeList=i.data.data.show_type_list):e.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},getNodeData:function(e){var t=this;return n()(s.a.mark(function a(){var i,r,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.nodeData=[],i={device_type:"6",title:t.keyword},a.next=4,t.axios.post(c._0,i);case 4:1==(r=a.sent).data.code?(t.nodeData=r.data.data.device_list,e?t.$nextTick(function(){var t=this;this.$refs.tree.setCheckedKeys([]),e.forEach(function(e){var a=t.$refs.tree.getNode(e);a&&t.$refs.tree.setChecked(a,!0)})}):(n=[],t.nodeData.forEach(function(e){n.push(e.device_id),e.children&&e.children.forEach(function(e){n.push(e.device_id)})}),t.$nextTick(function(){this.$refs.tree.setCheckedKeys(n)}))):t.$message({showClose:!0,message:r.data.msg,type:"error"});case 6:case"end":return a.stop()}},a,t)}))()},getlist:function(){var e=this;return n()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={rehearsal_id:JSON.parse(localStorage.getItem("Rehearsal_Id")),curr:e.page,pageSize:e.pageSize},t.next=3,e.axios.post(c._138,a);case 3:1==(i=t.sent).data.code?(e.total=i.data.data.total,e.tableData=i.data.data.data):e.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},getHash:function(){var e=this;return n()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post(c._20,{page_hash:"switchMent"});case 2:1==(a=t.sent).data.code?e.hash=a.data.data:e.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return t.stop()}},t,e)}))()},resetForm:function(){var e=this;this.ruleForm={scene_name:"",title:""},this.$nextTick(function(){e.$refs.ruleForm.resetFields()})},banpaiAdd:function(){this.title="新增预警灯配置",this.dialogVisible=!0,this.resetForm()},handleEit:function(e){var t=this;this.title="编辑预警灯配置",this.infoId=e.id,this.dialogVisible=!0,this.resetForm(),this.$nextTick(function(){t.getInfo(e.id)})},handleClickDel:function(e){var t=this;this.$confirm("是否确定进行删除","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e,hash:t.hash};t.axios.post(c._135,a).then(function(e){1==e.data.code?(t.$notify.success({showClose:!0,message:e.data.msg,type:"success"}),(t.total-1)%t.pageSize==0&&t.total>1&&(t.page-=1),t.getlist()):t.$notify.error({title:"失败",message:e.data.msg})});t.getHash()}).catch(function(e){})},submitForm:function(){var e,t=this;this.$refs.ruleForm.validate((e=n()(s.a.mark(function e(a){var i,r,n,l,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.next=3,t.getHash();case 3:return i=new RegExp(/^[0-9]*$/),r=[],t.screen.forEach(function(e){i.test(e)&&r.push(e)}),n={rehearsal_id:JSON.parse(localStorage.getItem("Rehearsal_Id")),device_ids:r.join(","),hash:t.hash},l=void 0,void 0!==t.infoId?(l=c._136,n.id=t.infoId):l=c._134,e.next=12,t.axios.post(l,n);case 12:1==(o=e.sent).data.code?(t.$message({showClose:!0,message:o.data.msg,type:"success"}),t.dialogVisible=!1):t.$message({showClose:!0,message:o.data.msg,type:"error"}),t.getlist(),t.getHash();case 16:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"deckArrangement"},[a("el-button",{staticStyle:{margin:"20px 10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return t.preventDefault(),e.banpaiAdd.apply(null,arguments)}}},[e._v("新增预警灯配置")]),e._v(" "),a("div",[e._v("\n            已选设备\n        ")]),e._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)","max-height":e.tableHeight,size:"medium"}},[e._l(e.tableHead,function(e,t){return[a("el-table-column",{key:t,attrs:{prop:e.prop,align:"center",label:e.title,width:e.width,"min-width":e.minWidth,"show-overflow-tooltip":!0}})]}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClickDel(t.row.id)}}},[e._v("删除")])]}}])})],2)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.page,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"prev, pager, next, sizes,total",total:e.total,"hide-on-single-page":e.total<10},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备选择"}},[a("el-button",{on:{click:e.screenClick}},[e._v("设备选择")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择设备",visible:e.screenVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.screenVisible=t},close:function(t){e.screenVisible=!1}}},[a("el-form",[a("el-form-item",{staticStyle:{display:"block"}},[a("el-checkbox",{on:{change:e.selectAll},model:{value:e.isSelectAll,callback:function(t){e.isSelectAll=t},expression:"isSelectAll"}},[e._v("全选/全不选")]),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.nodeData,"show-checkbox":"","check-on-click-node":"","node-key":"device_id",props:e.defaultProps}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.screenSubmit}},[e._v("提交")])],1)],1)],1)],1)])},staticRenderFns:[]};var u=a("VU/8")(d,h,!1,function(e){a("tJzY")},"data-v-8837a094",null);t.default=u.exports},tJzY:function(e,t){},zeHc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s=a("bOdI"),r=a.n(s),n=a("Xxa5"),l=a.n(n),o=a("exGp"),c=a.n(o),d=a("mvHQ"),h=a.n(d),u=a("gyMJ"),p={name:"deckArrangement",data:function(){return{total:0,page:1,pageSize:10,rehearsal_id:"",tableData:[],tableHeight:window.innerHeight-180,tableHead:[{title:"序号",prop:"id",width:"90"},{title:"设备名称",prop:"device_name",minWidth:"120"},{title:"设备所在位置",prop:"location_name",minWidth:"120"},{title:"播放预览",prop:"file",minWidth:"300"}],tableHeads:[{title:"素材名称",prop:"title",minWidth:"100"},{title:"素材时长",prop:"duration",minWidth:"100"}],disabled:!1,title:"",hash:"",centerDialogVisible:!1,centerDialogVisibleEit:!1,ruleForm:{name:"",region:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}]},value:[],fileList:[],centerDialogVisiblePhotoImg:!1,multipleSelection:[],baseUrl:"",dialogVisible:!1,showTypeList:[],showTitle:"选择图片",previewData:[],showTypeVisible:!1,keyword:"",showNodeData:[],screen:[],screenVisible:!1,isSelectAll:!1,nodeData:[],defaultProps:{children:"children",label:"device_name"},tableHeadCopy:[]}},mounted:function(){this.baseUrl="http://xwcs.xyruxue.com/",localStorage.getItem("Rehearsal_Id")&&this.getlist(),this.resView(),this.getHash(),this.tableHeadCopy=JSON.parse(h()(this.tableHead))},methods:(i={handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getlist()},handleCurrentChange:function(e){this.page=e,this.getlist()},backDrill:function(){this.$router.push({name:"drillManagement"})},selectAll:function(){this.isSelectAll?this.$refs.tree.setCheckedNodes(this.nodeData):this.$refs.tree.setCheckedNodes([])},getRowKey:function(e){return e.id},cellClick:function(e,t,a,i){2==e.file_type&&"right"==t.fixed&&window.open(this.baseUrl+e.file_path,"_blank")},screenClick:function(){var e=this;this.resView(),this.screenVisible=!0,this.isSelectAll=!1,this.$nextTick(function(){e.screen.length>0&&e.getNodeData(e.screen)})},showChange:function(e){this.file_ids=[],this.previewData=[],1==e?this.showTitle="选择图片":2==e&&(this.showTitle="选择视频")},showClick:function(){var e=this;this.keyword="",this.resView(),1==this.ruleForm.show_type?this.tableHeads=this.tableHeads.filter(function(e){return"素材时长"!==e.title}):this.tableHead=this.tableHeadCopy,this.showTypeVisible=!0,this.$nextTick(function(){e.previewData.forEach(function(t){void 0!==e.showNodeData.find(function(e){return e.id==t.id})&&e.$refs.multipleTable.toggleRowSelection(e.showNodeData.find(function(e){return e.id==t.id}),!0)})})},resetForm:function(){var e=this;this.ruleForm={screen_name:"",frequency:"",screen_type:"",show_type:""},this.showType=[],this.screen=[],this.$nextTick(function(){e.$refs.ruleForm.resetFields()})},screenSubmit:function(){this.screen=this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys()),this.screenVisible=!1},getInfo:function(e){var t=this;return c()(l.a.mark(function a(){var i,s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.axios.post(u.Q,{id:e});case 2:1==(i=a.sent).data.code?(t.ruleForm=i.data.data,t.device_ids=i.data.data.list,t.screen=i.data.data.list,t.file_ids=i.data.data.file_ids.length>0?i.data.data.file_ids.split(","):[],1==i.data.data.show_type?t.showTitle="选择图片":2==i.data.data.show_type&&(t.showTitle="选择视频"),t.dis=i.data.data.file_data,t.previewData=i.data.data.file_data,s=0,t.previewData.forEach(function(e,t){void 0!==e&&(s+=e.file_length)}),t.timestr=t.timeChange(s),t.resView()):t.$message({showClose:!0,message:i.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,t)}))()},select:function(e){var t=this,a=[];e.length>0?e.forEach(function(i,s){i.file_type==t.ruleForm.show_type?a.push(i):e.splice(s,1)}):a=e,this.previewData=a,a.length>0?(this.file_ids=[],a.forEach(function(e){void 0!==e&&t.file_ids.push(e.id)})):this.file_ids=[];var i=0;this.previewData.forEach(function(e,t){void 0!==e&&2==e.file_type&&(i+=e.file_length)}),this.timestr=this.timeChange(i)},resView:function(){var e=this;return c()(l.a.mark(function t(){var a,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={device_type:"1",file_type:e.ruleForm.show_type?e.ruleForm.show_type:"",title:e.keyword},t.next=3,e.axios.post(u._0,a);case 3:1==(i=t.sent).data.code?(e.nodeData=i.data.data.device_list,e.showNodeData="[object Object]"===Object.prototype.toString.call(i.data.data.file_list)?i.data.data.file_list.data:[],e.showTypeList=i.data.data.show_type_list):e.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},getNodeData:function(e){var t=this;return c()(l.a.mark(function a(){var i,s,r;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.nodeData=[],i={device_type:"1",file_type:t.ruleForm.show_type?t.ruleForm.show_type:"",title:t.keyword},a.next=4,t.axios.post(u._0,i);case 4:1==(s=a.sent).data.code?(t.nodeData=s.data.data.device_list,e?t.$nextTick(function(){var t=this;this.$refs.tree.setCheckedKeys([]),e.forEach(function(e){var a=t.$refs.tree.getNode(e);a&&t.$refs.tree.setChecked(a,!0)})}):(r=[],t.nodeData.forEach(function(e){r.push(e.device_id),e.children&&e.children.forEach(function(e){r.push(e.device_id)})}),t.$nextTick(function(){this.$refs.tree.setCheckedKeys(r)}))):t.$message({showClose:!0,message:s.data.msg,type:"error"});case 6:case"end":return a.stop()}},a,t)}))()},getlist:function(){var e=this;return c()(l.a.mark(function t(){var a,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={rehearsal_id:JSON.parse(localStorage.getItem("Rehearsal_Id")),curr:e.page,pageSize:e.pageSize},t.next=3,e.axios.post(u.R,a);case 3:1==(i=t.sent).data.code?(e.total=i.data.data.total,e.tableData=i.data.data.data):e.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},videoClick:function(e){window.open(e,"_blank")},getHash:function(){var e=this;return c()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post(u._20,{page_hash:"deckArrangement"});case 2:1==(a=t.sent).data.code?e.hash=a.data.data:e.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return t.stop()}},t,e)}))()}},r()(i,"resetForm",function(){var e=this;this.ruleForm={scene_name:"",title:""},this.$nextTick(function(){e.$refs.ruleForm.resetFields()})}),r()(i,"banpaiAdd",function(){this.title="新增班牌配置",this.dialogVisible=!0,this.resetForm()}),r()(i,"handleEit",function(e){var t=this;this.title="编辑班牌配置",this.infoId=e.id,this.dialogVisible=!0,this.resetForm(),this.$nextTick(function(){t.getInfo(e.id)})}),r()(i,"handleClickDel",function(e){var t=this;this.$confirm("是否确定进行删除","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e,hash:t.hash};t.axios.post(u.O,a).then(function(e){1==e.data.code?(t.$notify.success({showClose:!0,message:e.data.msg,type:"success"}),(t.total-1)%t.pageSize==0&&t.total>1&&(t.page-=1),t.getlist()):t.$notify.error({title:"失败",message:e.data.msg})});t.getHash()}).catch(function(e){})}),r()(i,"submitForm",function(){var e,t=this;this.$refs.ruleForm.validate((e=c()(l.a.mark(function e(a){var i,s,r,n,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.next=3,t.getHash();case 3:return i=new RegExp(/^[0-9]*$/),s=[],t.screen.forEach(function(e){i.test(e)&&s.push(e)}),r={rehearsal_id:JSON.parse(localStorage.getItem("Rehearsal_Id")),show_type:t.ruleForm.show_type,file_ids:t.file_ids.join(","),device_ids:s.join(","),hash:t.hash},n=void 0,void 0!==t.infoId?(n=u.P,r.id=t.infoId):n=u.N,e.next=12,t.axios.post(n,r);case 12:1==(o=e.sent).data.code?(t.$message({showClose:!0,message:o.data.msg,type:"success"}),t.dialogVisible=!1):t.$message({showClose:!0,message:o.data.msg,type:"error"}),t.getlist(),t.getHash();case 16:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}),r()(i,"timeChange",function(e){var t=parseInt(e),a=Math.floor(t/86400)<10?"0"+Math.floor(t/86400):Math.floor(t/86400),i=Math.floor(t/3600%24)<10?"0"+Math.floor(t/3600%24):Math.floor(t/3600%24),s=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),r=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60),n="";return"00"!==a&&(n+=a+"天"),"00"!==i&&(n+=i+"时"),"00"!==s&&(n+=s+"分"),n+=r+"秒"}),i)},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"deckArrangement"},[a("el-button",{staticStyle:{margin:"20px 10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return t.preventDefault(),e.banpaiAdd.apply(null,arguments)}}},[e._v("新增班牌配置")]),e._v(" "),a("div",[e._v("\n            已选设备\n        ")]),e._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)","max-height":e.tableHeight,size:"medium"}},[e._l(e.tableHead,function(t,i){return["file"!=t.prop?a("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.title,width:t.width,"min-width":t.minWidth,"show-overflow-tooltip":!0}}):a("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.title,"min-width":t.minWidth,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.file_data,function(t,i){return a("span",{key:i,staticStyle:{"margin-right":"10px"}},[1==t.file_type?a("el-image",{staticStyle:{width:"18px",height:"18px"},attrs:{src:e.baseUrl+t.file_small,"preview-src-list":[e.baseUrl+t.file_path]}}):2==t.file_type?a("video",{attrs:{src:e.baseUrl+t.file_path,height:"18px"},on:{click:function(a){return e.videoClick(e.baseUrl+t.file_path)}}}):e._e()],1)})}}],null,!0)})]}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClickDel(t.row.id)}}},[e._v("删除")])]}}])})],2)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.page,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"prev, pager, next, sizes,total",total:e.total,"hide-on-single-page":e.total<10},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备选择"}},[a("el-button",{on:{click:e.screenClick}},[e._v("设备选择")])],1),e._v(" "),a("el-form-item",{attrs:{label:"素材类型",prop:"show_type"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.showChange},model:{value:e.ruleForm.show_type,callback:function(t){e.$set(e.ruleForm,"show_type",t)},expression:"ruleForm.show_type"}},e._l(e.showTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.showTitle}},[a("el-button",{on:{click:e.showClick}},[e._v("素材选择")])],1),e._v(" "),a("el-form-item",[2==e.ruleForm.show_type&&e.previewData.length>0?a("div",[e._v("\n                        "+e._s("目前播放时长："+e.timestr)+"\n                    ")]):e._e(),e._v(" "),e.previewData.length>0?a("div",[e._l(e.previewData,function(t,i){return[1==e.ruleForm.show_type&&"undefined"!=t?a("span",{key:i,staticClass:"par"},[a("el-image",{staticStyle:{width:"100px",height:"100px","margin-right":"5px"},attrs:{src:e.baseUrl+t.file_path,"preview-src-list":[e.baseUrl+t.file_path]}})],1):2==e.ruleForm.show_type&&"undefined"!=t?a("span",{key:i,staticClass:"par"},[a("video",{staticStyle:{"margin-right":"5px"},attrs:{height:"100px",src:e.baseUrl+t.file_path},on:{click:function(a){return e.videoClick(e.baseUrl+t.file_path)}}})]):e._e()]})],2):e._e()]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.showTitle,visible:e.showTypeVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.showTypeVisible=t},close:function(t){e.showTypeVisible=!1}}},[a("el-input",{staticStyle:{width:"30%","margin-bottom":"10px"},attrs:{placeholder:"请输入素材名称",clearable:"",size:"small"},on:{change:e.resView},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.showNodeData,"row-key":e.getRowKey,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)","max-height":e.tableHeight,size:"medium"},on:{"cell-click":e.cellClick,"selection-change":e.select}},[a("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),e._v(" "),e._l(e.tableHeads,function(e,t){return[a("el-table-column",{key:t,attrs:{prop:e.prop,align:"center",label:e.title,"min-width":e.minWidth,"show-overflow-tooltip":!0}})]}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"素材预览",align:"center",fixed:"right","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.file_type?a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.baseUrl+t.row.file_path,"preview-src-list":[e.baseUrl+t.row.file_path]}}):2==t.row.file_type?a("video",{attrs:{src:e.baseUrl+t.row.file_path,height:"50px"}}):e._e()]}}])})],2)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择设备",visible:e.screenVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.screenVisible=t},close:function(t){e.screenVisible=!1}}},[a("el-form",[a("el-form-item",{staticStyle:{display:"block"}},[a("el-checkbox",{on:{change:e.selectAll},model:{value:e.isSelectAll,callback:function(t){e.isSelectAll=t},expression:"isSelectAll"}},[e._v("全选/全不选")]),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.nodeData,"show-checkbox":"","check-on-click-node":"","node-key":"device_id",props:e.defaultProps}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.screenSubmit}},[e._v("提交")])],1)],1)],1)],1)])},staticRenderFns:[]};var m=a("VU/8")(p,f,!1,function(e){a("BOfO")},"data-v-627a67e6",null);t.default=m.exports}});
//# sourceMappingURL=2.8d9e7fe14cbd80dea95a.js.map