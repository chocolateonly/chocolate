webpackJsonp([31],{TgIS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),r=a("exGp"),n=a.n(r),o=a("gyMJ"),l={data:function(){return{tableData:[],isLoading:!1,tableHeight:window.innerHeight-180,formData:{region_name:"",region_code:"",simple_code:"",disabledS:!0},title:"",hash:"",dialogVisible:!1,type:"",rule:{region_name:[{required:!0,message:"请输入区域名称",trigger:"blur"}],region_code:[{required:!0,message:"请输入区域编码",trigger:"blur"}],simple_code:[{required:!0,message:"请输入区域简码",trigger:"blur"}]}}},mounted:function(){this.getHashData(),this.getList()},methods:{getList:function(){var e=this;return n()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.axios.post(o._68,{format:1});case 3:1==(a=t.sent).data.code?(e.tableData=a.data.data.data,e.total=a.data.data.total,e.defaulted=a.data.data.defaulted,e.isLoading=!1):(e.isLoading=!1,e.$message({showClose:!0,message:a.data.msg,type:"error"}));case 5:case"end":return t.stop()}},t,e)}))()},resetForm:function(){this.formData={region_name:"",region_code:"",simple_code:"",disabledS:!1}},addBtn:function(e,t){this.title="新增",this.dialogVisible=!0,this.type=e,t&&(this.parent_id=t.id),this.resetForm(),this.getHashData()},editBtn:function(e){this.title="编辑",this.dialogVisible=!0,this.resetForm(),this.formData.region_name=e.region_name,this.formData.region_code=e.region_code,this.formData.simple_code=e.simple_code,this.formData.disabledS=0==e.disabled,this.listId=e.id,this.getHashData()},submitForm:function(e){var t,a=this;this.$refs[e].validate((t=n()(s.a.mark(function e(t){var i,r,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return i={region_name:a.formData.region_name,region_code:a.formData.region_code,simple_code:a.formData.simple_code,disabled:1==a.formData.disabledS?0:1,hash:a.hash},1==a.type?i.parent_id=0:2==a.type&&(i.parent_id=a.parent_id),"新增"==a.title?r=o._65:"编辑"==a.title&&(r=o._67,i.id=a.listId),e.next=6,a.axios.post(r,i);case 6:1==(n=e.sent).data.code?(a.dialogVisible=!1,a.$nextTick(function(){a.getList()}),a.getHashData()):(a.getHashData(),a.$message({showClose:!0,message:n.data.msg,type:"error"})),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,a)})),function(e){return t.apply(this,arguments)}))},delBtn:function(e){var t=this;return n()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(n()(s.a.mark(function a(){var i,r,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={id:e,hash:t.hash},a.next=3,t.axios.post(o._66,i);case 3:r=a.sent,1==(n=r.data).code?((t.total-1)%t.pageSize==0&&(t.pageNum=t.pageNum-1),t.getList(),t.getHashData(),t.$message({showClose:!0,message:"删除成功",type:"success"})):(t.getHashData(),t.$message({showClose:!0,message:n.msg,type:"error"}));case 6:case"end":return a.stop()}},a,t)}))).catch(function(){t.$message({type:"info",message:"已取消删除"})});case 1:case"end":return a.stop()}},a,t)}))()},getHashData:function(){var e=this;return n()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={page_hash:"regionalManagement"},t.next=3,e.axios.post(o._20,a);case 3:1==(i=t.sent).data.code?e.hash=i.data.data:e.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"regionalManagement"},[a("div",{staticClass:"searchA"},[a("div",{staticClass:"add"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addBtn(1,null)}}},[e._v("新增")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"medium","max-height":e.tableHeight,"row-key":"id","tree-props":{children:"children"},"default-expand-all":!0}},[a("el-table-column",{attrs:{prop:"region_name",label:"区县"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.parent_id?a("el-button",{staticStyle:{color:"#67c23a"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.addBtn(2,t.row)}}},[e._v("新增下级")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.editBtn(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"mini"},on:{click:function(a){return e.delBtn(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.dialogVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title,visible:e.dialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"formData",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rule}},[a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{prop:"region_name",label:"区域名称"}},[a("el-input",{attrs:{placeholder:"请输入区域名称",size:"small"},model:{value:e.formData.region_name,callback:function(t){e.$set(e.formData,"region_name",t)},expression:"formData.region_name"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{prop:"region_code",label:"区域编码"}},[a("el-input",{attrs:{placeholder:"请输入区域编码(12位)",size:"small"},model:{value:e.formData.region_code,callback:function(t){e.$set(e.formData,"region_code",t)},expression:"formData.region_code"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{prop:"simple_code",label:"区域简码"}},[a("el-input",{attrs:{placeholder:"请输入区域编码(6位)",size:"small"},model:{value:e.formData.simple_code,callback:function(t){e.$set(e.formData,"simple_code",t)},expression:"formData.simple_code"}})],1)],1)])]),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formData")}}},[e._v("确 定")])],1)])],1)]):e._e()],1)])},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(e){a("sZFv")},"data-v-54eddab4",null);t.default=c.exports},sZFv:function(e,t){}});
//# sourceMappingURL=31.6d76cce92f6a05d02cda.js.map