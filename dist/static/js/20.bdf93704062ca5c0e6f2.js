webpackJsonp([20],{"Pm/z":function(t,a){},"WKp+":function(t,a){},Y1UA:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Xxa5"),r=e.n(i),s=e("exGp"),n=e.n(s),o=e("gyMJ"),l={data:function(){return{total:0,pageNum:1,pageSize:15,isLoading:!1,tableHeight:window.innerHeight-180,dictionary_type:1,formData:{dictionary_name:"",dictionary_code:"",remarks:"",order_num:"",dictionary_value:""},method_auth:{},editId:"",title:"",dialogVisible:!1,rule:{dictionary_name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],dictionary_code:[{required:!0,message:"请输入参数值",trigger:"blur"}]},tableHead:[{title:"ID",prop:"id",widthS:"130"},{title:"字典类型",prop:"dictionary_name"},{title:"字典编码",prop:"dictionary_code"},{title:"字典分类",prop:"dictionary_type"},{title:"字典说明",prop:"remarks"}],tableData:[],hashData:"",parent_id:"",codeDisabled:!1,level:0}},mounted:function(){this.getListData()},methods:{load:function(t,a,e){var i=this;return n()(r.a.mark(function a(){var s,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.axios.post(o.M,{curr:1,pagesize:50,id:t.id});case 2:s=a.sent,1==(n=s.data).code?e(n.data.data):i.$message({showClose:!0,message:n.msg,type:"error"});case 5:case"end":return a.stop()}},a,i)}))()},handleSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getListData()},handleCurrentChange:function(t){this.pageNum=t,this.getListData()},getHashData:function(){var t=this;return n()(r.a.mark(function a(){var e;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.axios.post(o._20,{page_hash:"dataDictionary"});case 2:1==(e=a.sent).data.code?t.hashData=e.data.data:t.$message({showClose:!0,message:e.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,t)}))()},submitForm:function(t){var a,e=this;this.$refs[t].validate((a=n()(r.a.mark(function t(a){var i,s,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return i={dictionary_type:e.dictionary_type,dictionary_name:e.formData.dictionary_name,dictionary_code:e.formData.dictionary_code,order_num:e.formData.order_num,dictionary_value:e.formData.dictionary_value,remarks:e.formData.remarks,hash:e.hashData,level:e.level},-1!=e.title.indexOf("新增")?(s=o.I,i.parent_id=e.parent_id):"编辑"==e.title&&(s=o.K,i.id=e.editId),t.next=5,e.axios.post(s,i);case 5:1==(n=t.sent).data.code?(e.dialogVisible=!1,e.tableData=[],e.$nextTick(function(){e.getListData()})):(e.getHashData(),e.$message({showClose:!0,message:n.data.msg,type:"error"})),t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}},t,e)})),function(t){return a.apply(this,arguments)}))},resetForm:function(){this.dictionary_type=1,this.formData={dictionary_name:"",dictionary_code:"",order_num:"",dictionary_value:"",remarks:""}},addBtn:function(t,a){this.dialogVisible=!0,this.codeDisabled=!1,1==t?(this.parent_id=a,this.title="新增父级字典",this.level=1):2==t&&(this.parent_id=a.id,this.title="新增"+a.dictionary_name+"下级字典",this.level=a.level+1),this.getHashData(),this.resetForm()},editBtn:function(t){var a=this;this.title="编辑",this.dialogVisible=!0,this.codeDisabled=!0,this.dictionary_type=t.dictionary_type,this.editId=t.id,this.getInfo(t.id),this.getHashData(),this.$nextTick(function(){a.$refs.formData.clearValidate()})},getInfo:function(t){var a=this;return n()(r.a.mark(function e(){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.axios.post(o.L,{id:t});case 2:1==(i=e.sent).data.code?a.formData=i.data.data:a.$message({showClose:!0,message:i.data.msg,type:"error"});case 4:case"end":return e.stop()}},e,a)}))()},delBtn:function(t){var a=this;return n()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(n()(r.a.mark(function e(){var i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={id:t},e.next=3,a.axios.post(o.J,i);case 3:1==(s=e.sent).data.code?(a.tableData=[],a.$nextTick(function(){a.getListData()}),a.$message({showClose:!0,message:"删除成功",type:"success"})):a.$message({showClose:!0,message:s.data.msg,type:"error"});case 5:case"end":return e.stop()}},e,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})});case 1:case"end":return e.stop()}},e,a)}))()},getListData:function(){var t=this;return n()(r.a.mark(function a(){var e,i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.isLoading=!0,e={curr:t.pageNum,pagesize:t.pageSize},a.next=4,t.axios.post(o.H,e);case 4:i=a.sent,1==(s=i.data).code?(t.tableData=s.data.data,t.total=s.data.total,t.isLoading=!1):(t.isLoading=!1,t.$message({showClose:!0,message:s.msg,type:"error"}));case 7:case"end":return a.stop()}},a,t)}))()}}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main"},[e("div",{staticClass:"dataDictionary"},[e("div",{staticClass:"searchA"},[e("div",{staticClass:"add"},[e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(a){return t.addBtn(1,0)}}},[t._v("新增")])],1)]),t._v(" "),e("div",{staticClass:"home_table"},[t.tableData.length>0?e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)",size:"medium","max-height":t.tableHeight,"row-key":"id",lazy:"",load:t.load,"tree-props":{hasChildren:"hasChildren"}}},[t._l(t.tableHead,function(a,i){return["dictionary_type"==a.prop?e("el-table-column",{key:i,attrs:{prop:a.prop,label:a.title,width:a.width,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.dictionary_type?e("span",[t._v("业务类")]):2==a.row.dictionary_type?e("span",[t._v("系统类")]):3==a.row.dictionary_type?e("span",[t._v("基础类")]):e("span",[t._v("其它类")])]}}],null,!0)}):e("el-table-column",{key:i,attrs:{prop:a.prop,label:a.title,"show-overflow-tooltip":!0,width:a.widthS}})]}),t._v(" "),e("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"220"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.level<3?e("el-button",{staticStyle:{color:"#67c23a"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.addBtn(2,a.row)}}},[t._v("新增下级字典")]):t._e(),t._v(" "),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.editBtn(a.row)}}},[t._v("编辑")]),t._v(" "),e("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.delBtn(a.row.id)}}},[t._v("删除")])]}}],null,!1,1906587010)})],2):t._e(),t._v(" "),e("div",{staticClass:"pagination"},[e("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":t.pageNum,"page-sizes":[15,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next",total:t.total,"hide-on-single-page":t.total<15},on:{"update:currentPage":function(a){t.pageNum=a},"update:current-page":function(a){t.pageNum=a},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),t.dialogVisible?e("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"dialogStyle",attrs:{title:t.title,visible:t.dialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("div",[e("el-form",{ref:"formData",staticClass:"demo-ruleForm",attrs:{model:t.formData,rules:t.rule}},[e("div",{staticClass:"dialogInput"},[e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{prop:"dictionary_name",label:"字典类型"}},[e("el-input",{attrs:{placeholder:"请输入字典类型",size:"small"},model:{value:t.formData.dictionary_name,callback:function(a){t.$set(t.formData,"dictionary_name",a)},expression:"formData.dictionary_name"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{prop:"dictionary_code",label:"字典编码"}},[e("el-input",{attrs:{placeholder:"请输入字典编码",size:"small",disabled:t.codeDisabled},model:{value:t.formData.dictionary_code,callback:function(a){t.$set(t.formData,"dictionary_code",a)},expression:"formData.dictionary_code"}})],1)],1)])]),t._v(" "),e("div",{staticClass:"dialogInput"},[e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{prop:"order_num",label:"列表排序"}},[e("el-input",{attrs:{placeholder:"请输入列表排序",size:"small"},model:{value:t.formData.order_num,callback:function(a){t.$set(t.formData,"order_num",a)},expression:"formData.order_num"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"字典数值"}},[e("el-input",{attrs:{placeholder:"请输入字典数值",size:"small"},model:{value:t.formData.dictionary_value,callback:function(a){t.$set(t.formData,"dictionary_value",a)},expression:"formData.dictionary_value"}})],1)],1)])]),t._v(" "),e("div",{staticClass:"dialogInput dialogInput1"},[e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"字典分类"}},[e("el-radio-group",{model:{value:t.dictionary_type,callback:function(a){t.dictionary_type=a},expression:"dictionary_type"}},[e("el-radio",{attrs:{label:1}},[t._v("业务类")]),t._v(" "),e("el-radio",{attrs:{label:2}},[t._v("系统类")]),t._v(" "),e("el-radio",{attrs:{label:3}},[t._v("基础类")]),t._v(" "),e("el-radio",{attrs:{label:4}},[t._v("其它类")])],1)],1)],1)])]),t._v(" "),e("div",{staticClass:"dialogInput"},[e("div",{staticClass:"padd"},[e("div",{staticClass:"paddTit"},[t._v("字典说明")]),t._v(" "),e("div",[e("el-form-item",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入字典说明(100个字符以内)",maxlength:"100",autosize:{minRows:2,maxRows:4}},model:{value:t.formData.remarks,callback:function(a){t.$set(t.formData,"remarks",a)},expression:"formData.remarks"}})],1)],1)])]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(a){return t.submitForm("formData")}}},[t._v("确 定")])],1)])],1)]):t._e()],1)])},staticRenderFns:[]};var c=e("VU/8")(l,d,!1,function(t){e("WKp+"),e("Pm/z")},"data-v-273570a4",null);a.default=c.exports}});
//# sourceMappingURL=20.bdf93704062ca5c0e6f2.js.map