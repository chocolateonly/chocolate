webpackJsonp([15],{"8BqC":function(t,a){},IX4g:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("bOdI"),i=e.n(r),o=e("Xxa5"),s=e.n(o),n=e("exGp"),l=e.n(n),d=e("gyMJ"),c={data:function(){return{total:0,pageNum:1,pageSize:1e3,isLoading:!1,tableHeight:window.innerHeight-180,node_type:0,formData:{node_name:"",icon:"",remarks:"",router_path:"",file_path:"",order_num:"",controller_name:"",method_name:"",module_name:"",authority:1,signin:1,displayed:0,router_name:"",defaulted:"",color_set:"",abreast:"",node_type:0},method_auth:{},editId:"",title:"",dialogVisible:!1,rule:{node_name:[{required:!0,message:"请输入资源名称",trigger:"blur"}],order_num:[{required:!0,message:"请输入列表排序",trigger:"blur"}]},tableHead:[{title:"资源名称",prop:"node_name"},{title:"资源类型",prop:"node_type"},{title:"控制器名",prop:"controller_name"},{title:"方法名称",prop:"method_name"}],tableData:[],hashData:"",parent_id:""}},mounted:function(){this.getListData()},methods:{load:function(t,a,e){var r=this;return l()(s.a.mark(function a(){var i,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.axios.post(d.M,{curr:1,pagesize:50,id:t.id});case 2:i=a.sent,1==(o=i.data).code?e(o.data.data):r.$message({showClose:!0,message:o.msg,type:"error"});case 5:case"end":return a.stop()}},a,r)}))()},handleSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getListData()},handleCurrentChange:function(t){this.pageNum=t,this.getListData()},getHashData:function(){var t=this;return l()(s.a.mark(function a(){var e;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.axios.post(d._20,{page_hash:"dataDictionary"});case 2:1==(e=a.sent).data.code?t.hashData=e.data.data:t.$message({showClose:!0,message:e.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,t)}))()},submitForm:function(t){var a,e=this;this.$refs[t].validate((a=l()(s.a.mark(function t(a){var r,i,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return r={node_type:e.formData.node_type,node_name:e.formData.node_name,icon:e.formData.icon,router_path:e.formData.router_path,file_path:e.formData.file_path,order_num:e.formData.order_num,controller_name:e.formData.controller_name,method_name:e.formData.method_name,module_name:e.formData.module_name,authority:e.formData.authority,displayed:e.formData.displayed,remarks:e.formData.remarks,signin:e.formData.signin,abreast:e.formData.abreast,color_set:e.formData.color_set,defaulted:e.formData.defaulted,router_name:e.formData.router_name,hash:e.hashData},-1!=e.title.indexOf("新增")?(i=d._71,r.parent_id=e.parent_id):"编辑"==e.title&&(i=d._73,r.id=e.editId),t.next=5,e.axios.post(i,r);case 5:1==(o=t.sent).data.code?(e.dialogVisible=!1,e.tableData=[],e.$nextTick(function(){e.getListData()})):(e.getHashData(),e.$message({showClose:!0,message:o.data.msg,type:"error"})),t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}},t,e)})),function(t){return a.apply(this,arguments)}))},resetForm:function(){this.node_type=0,this.formData={node_name:"",icon:"",remarks:"",router_path:"",file_path:"",order_num:"",controller_name:"",method_name:"",module_name:"",authority:1,signin:1,displayed:0,router_name:"",defaulted:"",color_set:"",abreast:"",node_type:0}},addBtn:function(t,a){this.dialogVisible=!0,1==t?(this.parent_id=a,this.title="新增父级资源"):(this.parent_id=a.id,this.title="新增"+a.node_name+"下级资源"),this.getHashData(),this.resetForm()},editBtn:function(t){var a=this;this.title="编辑",this.dialogVisible=!0,this.getInfo(t.id),this.editId=t.id,this.getHashData(),this.$nextTick(function(){a.$refs.formData.clearValidate()})},getInfo:function(t){var a=this;return l()(s.a.mark(function e(){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.axios.post(d._74,{id:t});case 2:1==(r=e.sent).data.code?a.formData=r.data.data:a.$message({showClose:!0,message:r.data.msg,type:"error"});case 4:case"end":return e.stop()}},e,a)}))()},delBtn:function(t){var a=this;return l()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(l()(s.a.mark(function e(){var r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:t},e.next=3,a.axios.post(d._72,r);case 3:1==(i=e.sent).data.code?(a.tableData=[],a.$nextTick(function(){a.getListData()}),a.$message({showClose:!0,message:"删除成功",type:"success"})):a.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return e.stop()}},e,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})});case 1:case"end":return e.stop()}},e,a)}))()},getListData:function(){var t=this;return l()(s.a.mark(function a(){var r,o,n,l,c,m,u;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.isLoading=!0,r={curr:t.pageNum,pagesize:1e3},a.next=4,t.axios.post(d._75,r);case 4:o=a.sent,1==(n=o.data).code?(l=function t(a){a.forEach(function(a){m.forEach(function(t,r){if(t.parent_id&&t.parent_id===a.meta.id){var o;a.children||(a.children=[]),t.fullPath=a.meta.fullPath+"/"+t.path;var s=a.path+"/"+t.router_path+"/index",n=(o={component:function(){return e("PRBW")("./views"+s)},router_path:t.router_path,redirect:"noRedirect",node_name:t.node_name,icon:t.icon,id:t.id,abreast:t.abreast,authority:t.authority,class_name:t.class_name,color_set:t.color_set,controller_name:t.controller_name,defaulted:t.defaulted,displayed:t.displayed,file_path:t.file_path,mainsort:t.mainsort,method_name:t.method_name,module_name:t.module_name},i()(o,"node_name",t.node_name),i()(o,"node_type",t.node_type),i()(o,"order_num",t.order_num),i()(o,"parent_id",t.parent_id),i()(o,"remarks",t.remarks),i()(o,"router_name",t.router_name),i()(o,"router_path",t.router_path),i()(o,"signin",t.signin),i()(o,"meta",{id:t.id,title:t.title}),o);a.children.push(n)}}),a.children&&t(a.children)})},c=function(t){var a=!1;return m.forEach(function(e,r){e.parent_id&&e.parent_id===t&&(a=!0)}),a},m=n.data.data,u=[],m.forEach(function(t,a){if(0===t.parent_id){var r,o=(r={router_path:t.router_path,redirect:"noRedirect",node_name:t.node_name,icon:t.icon,id:t.id,abreast:t.abreast,authority:t.authority,class_name:t.class_name,color_set:t.color_set,controller_name:t.controller_name,defaulted:t.defaulted,displayed:t.displayed,file_path:t.file_path,mainsort:t.mainsort,method_name:t.method_name,module_name:t.module_name},i()(r,"node_name",t.node_name),i()(r,"node_type",t.node_type),i()(r,"order_num",t.order_num),i()(r,"parent_id",t.parent_id),i()(r,"remarks",t.remarks),i()(r,"router_name",t.router_name),i()(r,"router_path",t.router_path),i()(r,"signin",t.signin),i()(r,"meta",{id:t.id,title:t.title,icon:t.icon}),r);c(t.id)&&(o.children=[{path:"",component:function(){return e("mHk5")("./"+t.router_path+"/index")},meta:{title:t.title}}],o.children.splice(0,1)),u.push(o)}}),l(u),t.tableData=u,t.isLoading=!1):(t.isLoading=!1,t.$message({showClose:!0,message:n.msg,type:"error"}));case 7:case"end":return a.stop()}},a,t)}))()}}},m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main"},[e("div",{staticClass:"resourceManagement"},[e("div",{staticClass:"searchA"},[e("div",{staticClass:"add"},[e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(a){return t.addBtn(1,0)}}},[t._v("新增")])],1)]),t._v(" "),e("div",{staticClass:"home_table"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)",size:"medium","row-key":"id","max-height":t.tableHeight,"tree-props":{children:"children"}}},[t._l(t.tableHead,function(a,r){return["node_type"==a.prop?e("el-table-column",{key:r,attrs:{prop:a.prop,label:a.title,width:a.width,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.displayed?e("span",[t._v("菜单资源")]):0==a.row.displayed?e("span",[t._v("页面资源")]):t._e()]}}],null,!0)}):e("el-table-column",{key:r,attrs:{prop:a.prop,label:a.title,"show-overflow-tooltip":!0,width:a.widthS}})]}),t._v(" "),e("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"220"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticStyle:{color:"#67c23a"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.addBtn(2,a.row)}}},[t._v("新增下级资源")]),t._v(" "),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.editBtn(a.row)}}},[t._v("编辑")]),t._v(" "),e("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.delBtn(a.row.id)}}},[t._v("删除")])]}}])})],2),t._v(" "),e("div",{staticClass:"pagination"},[e("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":t.pageNum,"page-sizes":[15,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next",total:t.total,"hide-on-single-page":t.total<15},on:{"update:currentPage":function(a){t.pageNum=a},"update:current-page":function(a){t.pageNum=a},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),t.dialogVisible?e("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"dialogStyle",attrs:{title:t.title,visible:t.dialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("div",[e("el-form",{ref:"formData",staticClass:"demo-ruleForm",attrs:{model:t.formData,rules:t.rule}},[e("div",{staticClass:"dialogInput"},[e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{prop:"node_name",label:"资源名称"}},[e("el-input",{attrs:{placeholder:"请输入资源名称",size:"small"},model:{value:t.formData.node_name,callback:function(a){t.$set(t.formData,"node_name",a)},expression:"formData.node_name"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"资源图标"}},[e("el-input",{attrs:{placeholder:"请输入资源图标",size:"small"},model:{value:t.formData.icon,callback:function(a){t.$set(t.formData,"icon",a)},expression:"formData.icon"}})],1)],1)])]),t._v(" "),e("div",{staticClass:"dialogInput"},[e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"配色设置"}},[e("el-input",{attrs:{placeholder:"请输入配色设置",size:"small"},model:{value:t.formData.color_set,callback:function(a){t.$set(t.formData,"color_set",a)},expression:"formData.color_set"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"文件路径"}},[e("el-input",{attrs:{placeholder:"请输入客户端文件路径",size:"small"},model:{value:t.formData.file_path,callback:function(a){t.$set(t.formData,"file_path",a)},expression:"formData.file_path"}})],1)],1)])]),t._v(" "),e("div",{staticClass:"dialogInput"},[e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"路由路径"}},[e("el-input",{attrs:{placeholder:"请输入路由路径",size:"small"},model:{value:t.formData.router_path,callback:function(a){t.$set(t.formData,"router_path",a)},expression:"formData.router_path"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"路由名称"}},[e("el-input",{attrs:{placeholder:"请输入路由名称",size:"small"},model:{value:t.formData.router_name,callback:function(a){t.$set(t.formData,"router_name",a)},expression:"formData.router_name"}})],1)],1)])]),t._v(" "),e("div",{staticClass:"dialogInput"},[e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"列表排序",prop:"order_num"}},[e("el-input",{attrs:{placeholder:"请输入列表排序",size:"small"},model:{value:t.formData.order_num,callback:function(a){t.$set(t.formData,"order_num",a)},expression:"formData.order_num"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"模块名称"}},[e("el-input",{attrs:{placeholder:"请输入模块名称",size:"small"},model:{value:t.formData.module_name,callback:function(a){t.$set(t.formData,"module_name",a)},expression:"formData.module_name"}})],1)],1)])]),t._v(" "),e("div",{staticClass:"dialogInput"},[e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"控制器名"}},[e("el-input",{attrs:{placeholder:"请输入控制器名",size:"small"},model:{value:t.formData.controller_name,callback:function(a){t.$set(t.formData,"controller_name",a)},expression:"formData.controller_name"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"方法名称"}},[e("el-input",{attrs:{placeholder:"请输入方法名称",size:"small"},model:{value:t.formData.method_name,callback:function(a){t.$set(t.formData,"method_name",a)},expression:"formData.method_name"}})],1)],1)])]),t._v(" "),e("div",{staticClass:"dialogInput dialogInput1"},[e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"鉴权控制"}},[e("el-switch",{staticClass:"switch",attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.authority,callback:function(a){t.$set(t.formData,"authority",a)},expression:"formData.authority"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"需要登录"}},[e("el-switch",{staticClass:"switch",attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.signin,callback:function(a){t.$set(t.formData,"signin",a)},expression:"formData.signin"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"菜单显示"}},[e("el-switch",{staticClass:"switch",attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.displayed,callback:function(a){t.$set(t.formData,"displayed",a)},expression:"formData.displayed"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"并列显示"}},[e("el-switch",{staticClass:"switch",attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.abreast,callback:function(a){t.$set(t.formData,"abreast",a)},expression:"formData.abreast"}})],1)],1)]),t._v(" "),e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"默认赋予"}},[e("el-switch",{staticClass:"switch",attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.defaulted,callback:function(a){t.$set(t.formData,"defaulted",a)},expression:"formData.defaulted"}})],1)],1)])]),t._v(" "),e("div",{staticClass:"dialogInput dialogInput1",staticStyle:{margin:"20px 0"}},[e("div",{staticClass:"padd"},[e("div",[e("el-form-item",{attrs:{label:"资源分类"}},[e("el-radio-group",{staticStyle:{width:"200px"},model:{value:t.formData.node_type,callback:function(a){t.$set(t.formData,"node_type",a)},expression:"formData.node_type"}},[e("el-radio",{attrs:{label:0}},[t._v("电脑端")]),t._v(" "),e("el-radio",{attrs:{label:1}},[t._v("手机端")])],1)],1)],1)])]),t._v(" "),e("div",{staticClass:"dialogInput"},[e("div",{staticClass:"padd"},[e("div",{staticClass:"paddTit"},[t._v("资源说明")]),t._v(" "),e("div",[e("el-form-item",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入资源说明(100个字符以内)",maxlength:"100",autosize:{minRows:2,maxRows:4}},model:{value:t.formData.remarks,callback:function(a){t.$set(t.formData,"remarks",a)},expression:"formData.remarks"}})],1)],1)])]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(a){return t.submitForm("formData")}}},[t._v("确 定")])],1)])],1)]):t._e()],1)])},staticRenderFns:[]};var u=e("VU/8")(c,m,!1,function(t){e("TuBk"),e("8BqC")},"data-v-74f7cf48",null);a.default=u.exports},TuBk:function(t,a){}});
//# sourceMappingURL=15.64ef8a3417a377b0919a.js.map