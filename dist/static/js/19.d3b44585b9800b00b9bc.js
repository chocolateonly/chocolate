webpackJsonp([19],{c2lw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Xxa5"),a=n.n(s),r=n("mvHQ"),o=n.n(r),i=n("exGp"),c=n.n(i),l=n("2Uyi"),d=n("gyMJ"),u=(n("6BJT"),n("KesT")),p=n("rBKV"),m=n("xEQ9").JSSM4,f={data:function(){return{name:"",account:"",password:"",repassword:"",code:"",imgCode:"",codeId:"",btnLoading:!1,loginBtnTit:"注册",sendText:"点击发送",disabled:!1,times:null,titleEnv:p.TITLE_ENV}},mounted:function(){},methods:{clearInput:function(){this.name="",this.account="",this.password="",this.repassword="",this.code=""},sendCode:function(){if(Object(l.b)(this.account)){var e=this,t=60;e.sendText=t+"s",e.disabled=!0,e.times=setInterval(function(){t--,e.sendText=t+"s",0==t&&(t=60,e.sendText="重新获取",clearInterval(e.times),e.disabled=!1)},1e3),this.changeImgCode()}},changeImgCode:function(){var e=this;return c()(a.a.mark(function t(){var n,s,r,i,c,f,g,y,v;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={mobile:e.account,type:1},s=Math.random().toString(),r=Object(u.a)(s),i=new m(r),c=o()(n),f=i.encryptData_ECB(c),(g=new JSSM2).setPublicKey(p.PUBLIC_KEY),y={data:f,key:g.encrypt(r)},e.btnLoading=!0,t.next=12,e.axios.post(d._19,y);case 12:v=t.sent,e.btnLoading=!1,1==v.data.code?(e.btnLoading=!1,e.$message({showClose:!0,message:v.data.msg,type:"success"})):(Object(l.d)(v.data.msg),e.code="",e.sendText="点击发送",clearInterval(e.times),e.disabled=!1);case 15:case"end":return t.stop()}},t,e)}))()},loginBtn:function(){var e=this;return c()(a.a.mark(function t(){var n,s,r,i,c,f,g,y;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(l.b)(e.account)){t.next=2;break}return t.abrupt("return");case 2:if(Object(l.c)(e.password)){t.next=4;break}return t.abrupt("return");case 4:if(Object(l.c)(e.repassword)){t.next=6;break}return t.abrupt("return");case 6:if(e.password==e.repassword){t.next=9;break}return Object(l.d)("重复密码不一致"),t.abrupt("return");case 9:if(Object(l.a)(e.code)){t.next=11;break}return t.abrupt("return");case 11:return n={mobile:e.account,password:e.password,repassword:e.repassword,verify_code:e.code,ip:returnCitySN.cip},s=Math.random().toString(),r=Object(u.a)(s),i=new m(r),c=o()(n),f=i.encryptData_ECB(c),(g=new JSSM2).setPublicKey(p.PUBLIC_KEY),y={data:f,key:g.encrypt(r)},t.next=22,e.axios.post(d._63,y).then(function(t){1==t.data.code?(e.$message({showClose:!0,message:"注册成功",type:"success"}),localStorage.setItem("token",t.data.token),e.$router.push({name:"home"})):e.$message({showClose:!0,message:t.data.msg,type:"error"})}).catch(function(t){console.log(1),e.$message({showClose:!0,message:t.response.data.message,type:"error"})});case 22:case"end":return t.stop()}},t,e)}))()}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("div",{staticClass:"login_main"},[e._m(0),e._v(" "),n("div",{staticClass:"login_main_right"},[n("div",{staticClass:"login_title"},[e._v("智慧校园注册入口")]),e._v(" "),n("el-form",{attrs:{"label-width":"auto"}},[n("el-form-item",{attrs:{prop:"pass"}},[n("el-input",{attrs:{placeholder:"请输入手机号","suffix-icon":"el-icon-user",maxlength:"11"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginBtn.apply(null,arguments)}},model:{value:e.account,callback:function(t){e.account="string"==typeof t?t.trim():t},expression:"account"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"pass"}},[n("el-input",{attrs:{type:"password",placeholder:"请输入新密码","show-password":"","suffix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginBtn.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password="string"==typeof t?t.trim():t},expression:"password"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"pass"}},[n("el-input",{attrs:{type:"password",placeholder:"再次输入密码","show-password":"","suffix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginBtn.apply(null,arguments)}},model:{value:e.repassword,callback:function(t){e.repassword="string"==typeof t?t.trim():t},expression:"repassword"}})],1),e._v(" "),n("el-form-item",{staticClass:"yzm",attrs:{prop:"pass"}},[n("el-input",{attrs:{placeholder:"请输入验证码",maxlength:"6"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginBtn.apply(null,arguments)}},model:{value:e.code,callback:function(t){e.code="string"==typeof t?t.trim():t},expression:"code"}}),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.sendCode}},[e._v(e._s(e.sendText))])],1),e._v(" "),n("el-button",{staticClass:"loginbtn",attrs:{loading:e.btnLoading},on:{click:e.loginBtn}},[e._v(e._s(e.loginBtnTit))])],1),e._v(" "),n("div",{staticClass:"tabview"},[n("router-link",{attrs:{to:"/"}},[e._v("已有账号？去登录")])],1)],1)]),e._v(" "),n("div",{staticClass:"login_footer"},[e._v("©CopyRight 2023"+e._s(e.titleEnv))])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login_main_left"},[t("img",{staticClass:"login_img",attrs:{src:n("fSLK"),alt:""}})])}]};var y=n("VU/8")(f,g,!1,function(e){n("lRmS"),n("yqr3")},"data-v-3104ed4a",null);t.default=y.exports},lRmS:function(e,t){},yqr3:function(e,t){}});
//# sourceMappingURL=19.d3b44585b9800b00b9bc.js.map