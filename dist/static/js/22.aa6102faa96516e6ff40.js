webpackJsonp([22],{"3ktH":function(e,a){},IXy7:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Xxa5"),r=t.n(s),i=t("exGp"),n=t.n(i),o=t("gyMJ"),l={data:function(){return{total:0,pageNum:1,pageSize:15,isLoading:!1,tableHeight:window.innerHeight-180,formData:{student_name:"",sex:1,grade_id:"",class_id:"",student_code:"",id_card:"",sn_code:"",m1_code:"",guardian_name:"",guardian_tel:"",address:"",disabled:!0},method_auth:{},editId:"",title:"",search:{grade_id:"",class_id:"",keyword:""},dialogVisible:!1,rule:{student_name:[{required:!0,message:"请输入学生姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],grade_id:[{required:!0,message:"请选择所在年级",trigger:"change"}],class_id:[{required:!0,message:"请选择所在班级",trigger:"change"}],disabled:[{required:!0,message:"请选择学生状态",trigger:"change"}]},tableHead:[{title:"ID",prop:"id",minWidth:"100"},{title:"学生姓名",prop:"student_name",minWidth:"120"},{title:"性别",prop:"sex_name",minWidth:"100"},{title:"班级",prop:"class_name",minWidth:"100"},{title:"身份证号",prop:"id_card",minWidth:"180"},{title:"SN号",prop:"sn_code",minWidth:"150"},{title:"M1卡号",prop:"m1_code",minWidth:"150"},{title:"学籍号",prop:"student_code",minWidth:"120"},{title:"家长姓名",prop:"guardian_name",minWidth:"120"},{title:"联系电话",prop:"guardian_tel",minWidth:"150"},{title:"住址",prop:"address",minWidth:"150"},{title:"状态",prop:"disabled",minWidth:"100"}],tableData:[],hash:"",gradeList:[],classList:[]}},mounted:function(){this.getList(),this.Grade(),this.getHash()},methods:{gradeChange:function(e){String(e).length>0&&this.Class(e)},gradeC:function(e){String(e).length>0&&this.Class(e),this.formData.class_id=""},serchList:function(){this.pageNum=1,this.pageSize=15,this.getList()},handleSizeChange:function(e){this.pageNum=1,this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.pageNum=e,this.getList()},Grade:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.axios.post(o._131);case 2:1==(t=a.sent).data.code?e.gradeList=t.data.data:e.$message({showClose:!0,message:t.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,e)}))()},Class:function(e){var a=this;return n()(r.a.mark(function t(){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.axios.post(o._128,{grade_id:e});case 2:1==(s=t.sent).data.code?a.classList=s.data.data:a.$message({showClose:!0,message:s.data.msg,type:"error"});case 4:case"end":return t.stop()}},t,a)}))()},getList:function(){var e=this;return n()(r.a.mark(function a(){var t,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t={curr:e.pageNum,pageSize:e.pageSize,keyword:e.search.keyword,grade_id:e.search.grade_id,class_id:e.search.class_id},a.next=3,e.axios.post(o._133,t);case 3:1==(s=a.sent).data.code?(e.tableData=s.data.data.data,e.total=s.data.data.total):e.$message({showClose:!0,message:s.data.msg,type:"error"});case 5:case"end":return a.stop()}},a,e)}))()},getHash:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.axios.post(o._20,{page_hash:"studentManagement"});case 2:1==(t=a.sent).data.code?e.hash=t.data.data:e.$message({showClose:!0,message:t.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,e)}))()},addBtn:function(){this.title="新增学生",this.dialogVisible=!0,this.resetForm()},editBtn:function(e){var a=this;this.title="编辑学生",this.dialogVisible=!0,this.resetForm(),this.$nextTick(function(){a.getInfo(e.id)})},getInfo:function(e){var a=this;return n()(r.a.mark(function t(){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.axios.post(o._132,{id:e});case 2:1==(s=t.sent).data.code?(0==s.data.data.disabled?s.data.data.disabled=!0:1==s.data.data.disabled&&(s.data.data.disabled=!1),a.formData=s.data.data,a.Class(s.data.data.grade_id)):a.$message({showClose:!0,message:s.data.msg,type:"error"});case 4:case"end":return t.stop()}},t,a)}))()},resetForm:function(){var e=this;this.formData={student_name:"",sex:1,grade_id:"",class_id:"",student_code:"",id_card:"",sn_code:"",m1_code:"",guardian_name:"",guardian_tel:"",address:"",disabled:!0},this.$nextTick(function(){e.$refs.formData.resetFields()})},submit:function(){var e,a=this;this.$refs.formData.validate((e=n()(r.a.mark(function e(t){var s,i,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return e.next=3,a.getHash();case 3:return s={student_name:a.formData.student_name,sex:a.formData.sex,hash:a.hash,grade_id:a.formData.grade_id,class_id:a.formData.class_id,student_code:a.formData.student_code,id_card:a.formData.id_card,sn_code:a.formData.sn_code,m1_code:a.formData.m1_code,guardian_name:a.formData.guardian_name,guardian_tel:a.formData.guardian_tel,address:a.formData.address,disabled:1==a.formData.disabled?0:1},i=void 0,"新增学生"==a.title?i=o._127:(i=o._130,s.id=a.formData.id),e.next=8,a.axios.post(i,s);case 8:1==(n=e.sent).data.code?(a.$message({showClose:!0,message:n.data.msg,type:"success"}),a.dialogVisible=!1):a.$message({showClose:!0,message:n.data.msg,type:"error"}),a.getList(),a.getHash();case 12:case"end":return e.stop()}},e,a)})),function(a){return e.apply(this,arguments)}))},delBtn:function(e){var a=this;this.$confirm("是否确定删除该设备","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e};a.axios.post(o._129,t).then(function(e){1==e.data.code?(a.$notify.success({showClose:!0,message:e.data.msg,type:"success"}),(a.total-1)%a.pageSize==0&&a.total>1&&(a.page-=1),a.getList()):a.$notify.error({title:"失败",message:e.data.msg})});a.getHash()}).catch(function(e){})}}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"main"},[t("div",{staticClass:"studentManagement"},[t("div",{staticClass:"searchA"},[t("el-select",{attrs:{clearable:"",size:"small",placeholder:"请选择年级"},on:{change:e.gradeChange},model:{value:e.search.grade_id,callback:function(a){e.$set(e.search,"grade_id",a)},expression:"search.grade_id"}},e._l(e.gradeList,function(e){return t("el-option",{key:e.id,attrs:{label:e.grade_name,value:e.id}})}),1),e._v(" "),t("el-select",{attrs:{clearable:"",size:"small",placeholder:"请选择班级"},model:{value:e.search.class_id,callback:function(a){e.$set(e.search,"class_id",a)},expression:"search.class_id"}},e._l(e.classList,function(e){return t("el-option",{key:e.id,attrs:{label:e.class_name,value:e.id}})}),1),e._v(" "),t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"学生姓名、拼音、身份证、联系电话",clearable:"",size:"small"},model:{value:e.search.keyword,callback:function(a){e.$set(e.search,"keyword",a)},expression:"search.keyword"}}),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-search"},on:{click:function(a){return e.serchList()}}},[e._v("查询")]),e._v(" "),t("div",{staticClass:"add"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(a){return e.addBtn()}}},[e._v("新增")])],1)],1),e._v(" "),t("div",{staticClass:"home_table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)",size:"medium","max-height":e.tableHeight}},[e._l(e.tableHead,function(a,s){return["disabled"==a.prop?t("el-table-column",{key:s,attrs:{prop:a.prop,label:a.title,"min-width":a.minWidth,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{size:"small",type:0==a.row.disabled?"":"info"}},[e._v(e._s(0==a.row.disabled?"正常":"禁用"))])]}}],null,!0)}):t("el-table-column",{key:s,attrs:{prop:a.prop,label:a.title,"show-overflow-tooltip":!0,"min-width":a.minWidth}})]}),e._v(" "),t("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.editBtn(a.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.delBtn(a.row.id)}}},[e._v("删除")])]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.pageNum,"page-sizes":[15,30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.total,"hide-on-single-page":e.total<15},on:{"update:currentPage":function(a){e.pageNum=a},"update:current-page":function(a){e.pageNum=a},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title,visible:e.dialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("el-form",{ref:"formData",attrs:{model:e.formData,size:"medium",rules:e.rule,"label-width":"110px"}},[t("el-form-item",{attrs:{label:"学生姓名",prop:"student_name"}},[t("el-input",{attrs:{placeholder:"请输入学生姓名"},model:{value:e.formData.student_name,callback:function(a){e.$set(e.formData,"student_name","string"==typeof a?a.trim():a)},expression:"formData.student_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-radio-group",{model:{value:e.formData.sex,callback:function(a){e.$set(e.formData,"sex",a)},expression:"formData.sex"}},[t("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"所在年级",prop:"grade_id"}},[t("el-select",{attrs:{placeholder:"请选择所在年级"},on:{change:e.gradeC},model:{value:e.formData.grade_id,callback:function(a){e.$set(e.formData,"grade_id",a)},expression:"formData.grade_id"}},e._l(e.gradeList,function(e){return t("el-option",{key:e.id,attrs:{label:e.grade_name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"所在班级",prop:"class_id"}},[t("el-select",{attrs:{placeholder:"请选择所在班级"},model:{value:e.formData.class_id,callback:function(a){e.$set(e.formData,"class_id",a)},expression:"formData.class_id"}},e._l(e.classList,function(e){return t("el-option",{key:e.id,attrs:{label:e.class_name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"学籍号"}},[t("el-input",{attrs:{placeholder:"请输入学籍号"},model:{value:e.formData.student_code,callback:function(a){e.$set(e.formData,"student_code","string"==typeof a?a.trim():a)},expression:"formData.student_code"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"身份证号"}},[t("el-input",{attrs:{placeholder:"请输入身份证号"},model:{value:e.formData.id_card,callback:function(a){e.$set(e.formData,"id_card","string"==typeof a?a.trim():a)},expression:"formData.id_card"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"SN号"}},[t("el-input",{attrs:{placeholder:"请输入SN号"},model:{value:e.formData.sn_code,callback:function(a){e.$set(e.formData,"sn_code","string"==typeof a?a.trim():a)},expression:"formData.sn_code"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"M1卡号"}},[t("el-input",{attrs:{placeholder:"请输入M1卡号"},model:{value:e.formData.m1_code,callback:function(a){e.$set(e.formData,"m1_code","string"==typeof a?a.trim():a)},expression:"formData.m1_code"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"家长姓名"}},[t("el-input",{attrs:{placeholder:"请输入家长姓名"},model:{value:e.formData.guardian_name,callback:function(a){e.$set(e.formData,"guardian_name","string"==typeof a?a.trim():a)},expression:"formData.guardian_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系电话"}},[t("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.formData.guardian_tel,callback:function(a){e.$set(e.formData,"guardian_tel","string"==typeof a?a.trim():a)},expression:"formData.guardian_tel"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"住址"}},[t("el-input",{attrs:{placeholder:"请输入住址"},model:{value:e.formData.address,callback:function(a){e.$set(e.formData,"address","string"==typeof a?a.trim():a)},expression:"formData.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"学生状态",prop:"disabled"}},[t("el-switch",{model:{value:e.formData.disabled,callback:function(a){e.$set(e.formData,"disabled",a)},expression:"formData.disabled"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var c=t("VU/8")(l,d,!1,function(e){t("3ktH"),t("iJ3z")},"data-v-1068aa30",null);a.default=c.exports},iJ3z:function(e,a){}});
//# sourceMappingURL=22.aa6102faa96516e6ff40.js.map