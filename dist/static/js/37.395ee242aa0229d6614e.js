webpackJsonp([37],{U2On:function(e,t){},nd5C:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),o=a.n(r),i=a("exGp"),n=a.n(i),s=a("gyMJ"),l={data:function(){return{total:0,page:1,pageSize:15,isLoading:!1,tableHeight:window.innerHeight-180,tableHead:[{title:"编号",prop:"id",width:"120"},{title:"管理员姓名",prop:"real_name",width:"150"},{title:"学生姓名",prop:"child_name",width:"150"},{title:"学校类型",prop:"school_type_name",width:"100"},{title:"操作节点",prop:"operation",width:"300"},{title:"备注",prop:"remark"},{title:"操作时间",prop:"create_time",width:"200"}],region_id:"",tableData:[],searchForm:{keyword:"",region_id:"",date:[],controller_name:"",method_name:""},operaId:"",resArray:[],regionData:[]}},mounted:function(){this.getResArrayList(),this.getList()},methods:{handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.page=e,this.getList()},searchClick:function(){""==this.operaId&&(this.searchForm.controller_name=this.searchForm.method_name=""),null==this.searchForm.date&&(this.searchForm.date=[]),this.tableData=[],this.pageSize=15,this.page=1,this.getList()},getList:function(){var e=this;return n()(o.a.mark(function t(){var a,r,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,a={keyword:e.searchForm.keyword,start_time:e.searchForm.date[0]?e.searchForm.date[0]:"",end_time:e.searchForm.date[1]?e.searchForm.date[1]:"",region_id:e.searchForm.region_id,controller_name:e.searchForm.controller_name,method_name:e.searchForm.method_name,curr:e.page,pagesize:e.pageSize},t.next=4,e.axios.post(s._43,a);case 4:r=t.sent,1==(i=r.data).code?(e.isLoading=!1,e.tableData=i.data.data,e.total=i.data.total):(e.isLoading=!1,e.$message({showClose:!0,message:i.msg,type:"error"}));case 7:case"end":return t.stop()}},t,e)}))()},getRes:function(e){var t=this;this.resArray.map(function(a){a.id==e&&(t.searchForm.controller_name=a.controller,t.searchForm.method_name=a.method)})},SelectChange:function(e){this.region_id=e,this.getList()},getResArrayList:function(){var e=this;return n()(o.a.mark(function t(){var a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post(s._69,{});case 2:a=t.sent,1==(r=a.data).code?(e.resArray=r.data,e.regionData=r.data):e.$message({showClose:!0,message:r.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"operationLog"},[a("div",{staticClass:"searchA"},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange",size:"small","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}}),e._v(" "),a("el-select",{staticStyle:{"margin-left":"25px"},attrs:{filterable:"",placeholder:"请选择区域",size:"small",clearable:""},on:{change:function(t){return e.SelectChange(e.region_id)}},model:{value:e.searchForm.region_id,callback:function(t){e.$set(e.searchForm,"region_id",t)},expression:"searchForm.region_id"}},e._l(e.regionData,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1),e._v(" "),a("el-input",{attrs:{placeholder:"输入学生姓名、备注",size:"small",clearable:""},model:{value:e.searchForm.keyword,callback:function(t){e.$set(e.searchForm,"keyword",t)},expression:"searchForm.keyword"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"25px"},attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)","max-height":e.tableHeight,size:"medium"}},[e._l(e.tableHead,function(t,r){return["model_action_text"==t.prop?a("el-table-column",{key:r,attrs:{prop:t.prop,label:t.title,width:t.width,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return["insert"==t.row.model_action?a("span",{staticStyle:{color:"#67C23A"}},[e._v(e._s(t.row.model_action_text))]):"update"==t.row.model_action?a("span",{staticStyle:{color:"#E6A23C"}},[e._v(e._s(t.row.model_action_text))]):e._e()]}}],null,!0)}):a("el-table-column",{key:r,attrs:{prop:t.prop,label:t.title,width:t.width,"show-overflow-tooltip":!0}})]})],2)],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.page,"page-sizes":[15,30,50,100],"page-size":e.pageSize,layout:"prev, pager, next, sizes,total",total:e.total,"hide-on-single-page":e.total<15},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(e){a("U2On")},"data-v-3654d662",null);t.default=d.exports}});
//# sourceMappingURL=37.395ee242aa0229d6614e.js.map