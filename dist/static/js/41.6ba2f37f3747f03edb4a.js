webpackJsonp([41],{"1IrV":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),r=a("exGp"),n=a.n(r),o=a("gyMJ"),l={data:function(){return{total:0,pageNum:1,pageSize:15,isLoading:!1,tableHeight:window.innerHeight-180,formData:{item_name:"",item_key:"",item_value:"",remarks:""},method_auth:{},editId:"",title:"",dialogVisible:!1,rule:{item_name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],item_key:[{required:!0,message:"请输入映射值",trigger:"blur"}],item_value:[{required:!0,message:"请输入参数值",trigger:"blur"}]},tableHead:[{title:"ID",prop:"id",widthS:"100"},{title:"项目名称",prop:"item_name"},{title:"映射值",prop:"item_key"},{title:"参数值",prop:"item_value"}],tableData:[],hashData:""}},mounted:function(){this.getListData()},methods:{handleSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getListData()},handleCurrentChange:function(t){this.pageNum=t,this.getListData()},getHashData:function(){var t=this;return n()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.axios.post(o._20,{page_hash:"configurationManagement"});case 2:1==(a=e.sent).data.code?t.hashData=a.data.data:t.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return e.stop()}},e,t)}))()},submitForm:function(t){var e,a=this;this.$refs[t].validate((e=n()(s.a.mark(function t(e){var i,r,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=9;break}return i={item_key:a.formData.item_key,item_name:a.formData.item_name,item_value:a.formData.item_value,remarks:a.formData.remarks,hash:a.hashData},"新增"==a.title?r=o.A:"编辑"==a.title&&(r=o.C,i.id=a.editId),t.next=5,a.axios.post(r,i);case 5:1==(n=t.sent).data.code?(a.dialogVisible=!1,a.$nextTick(function(){a.getListData()})):(a.getHashData(),a.$message({showClose:!0,message:n.data.msg,type:"error"})),t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}},t,a)})),function(t){return e.apply(this,arguments)}))},resetForm:function(){this.formData={item_key:"",item_name:"",item_value:"",remarks:""}},addBtn:function(){this.title="新增",this.dialogVisible=!0,this.getHashData(),this.resetForm()},editBtn:function(t){var e=this;this.title="编辑",this.dialogVisible=!0,this.formData={item_key:t.item_key,item_name:t.item_name,item_value:t.item_value,remarks:t.remarks},this.editId=t.id,this.getHashData(),this.$nextTick(function(){e.$refs.formData.clearValidate()})},delBtn:function(t){var e=this;return n()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(n()(s.a.mark(function a(){var i,r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={id:t},a.next=3,e.axios.post(o.B,i);case 3:1==(r=a.sent).data.code?(e.getListData(),e.$message({showClose:!0,message:"删除成功",type:"success"})):e.$message({showClose:!0,message:r.data.msg,type:"error"});case 5:case"end":return a.stop()}},a,e)}))).catch(function(){e.$message({type:"info",message:"已取消删除"})});case 1:case"end":return a.stop()}},a,e)}))()},getListData:function(){var t=this;return n()(s.a.mark(function e(){var a,i,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,a={curr:t.pageNum,pagesize:t.pageSize},e.next=4,t.axios.post(o.D,a);case 4:i=e.sent,1==(r=i.data).code?(t.tableData=r.data.data,t.total=r.data.total,t.isLoading=!1):(t.isLoading=!1,t.$message({showClose:!0,message:r.msg,type:"error"}));case 7:case"end":return e.stop()}},e,t)}))()}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"configurationManagement"},[a("div",{staticClass:"searchA"},[a("div",{staticClass:"add"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.addBtn}},[t._v("新增")])],1)]),t._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)",size:"medium","max-height":t.tableHeight}},[t._l(t.tableHead,function(t,e){return[a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.title,"show-overflow-tooltip":!0,width:t.widthS}})]}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.editBtn(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.delBtn(e.row.id)}}},[t._v("删除")])]}}])})],2),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":t.pageNum,"page-sizes":[15,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next",total:t.total,"hide-on-single-page":t.total<15},on:{"update:currentPage":function(e){t.pageNum=e},"update:current-page":function(e){t.pageNum=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),t.dialogVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"dialogStyle",attrs:{title:t.title,visible:t.dialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[a("el-form",{ref:"formData",staticClass:"demo-ruleForm",attrs:{model:t.formData,rules:t.rule}},[a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{prop:"item_name",label:"项目名称"}},[a("el-input",{attrs:{placeholder:"请输入项目名称",size:"small"},model:{value:t.formData.item_name,callback:function(e){t.$set(t.formData,"item_name",e)},expression:"formData.item_name"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{prop:"item_key",label:"映射值"}},[a("el-input",{attrs:{placeholder:"请输入映射值",size:"small"},model:{value:t.formData.item_key,callback:function(e){t.$set(t.formData,"item_key",e)},expression:"formData.item_key"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{prop:"item_value",label:"参数值"}},[a("el-input",{attrs:{placeholder:"请输入参数值",size:"small"},model:{value:t.formData.item_value,callback:function(e){t.$set(t.formData,"item_value",e)},expression:"formData.item_value"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",{staticClass:"paddTit"},[t._v("项目说明")]),t._v(" "),a("div",[a("el-form-item",[a("el-input",{attrs:{type:"textarea",placeholder:"请输入项目说明(100个字符以内)",maxlength:"100",autosize:{minRows:2,maxRows:4}},model:{value:t.formData.remarks,callback:function(e){t.$set(t.formData,"remarks",e)},expression:"formData.remarks"}})],1)],1)])]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("formData")}}},[t._v("确 定")])],1)])],1)]):t._e()],1)])},staticRenderFns:[]};var c=a("VU/8")(l,m,!1,function(t){a("PHKD")},"data-v-24eaa69a",null);e.default=c.exports},PHKD:function(t,e){}});
//# sourceMappingURL=41.6ba2f37f3747f03edb4a.js.map