webpackJsonp([38],{"9ozK":function(t,e){},PQCe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),i=a.n(s),n=a("exGp"),r=a.n(n),o=a("gyMJ"),l={data:function(){return{total:0,page:1,pageSize:15,mhVal:"",isLoading:!1,tableHeight:window.innerHeight-180,formData:{selectVal3:"",dialogNameVal:"",content:""},title:"",dialogVisible:!1,rule:{dialogNameVal:[{required:!0,message:"请输入标题",trigger:"blur"}],selectVal3:[{required:!0,message:"请选择类型",trigger:"change"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"}]},tableHead:[{title:"序号",prop:"id",minWidth:"100"},{title:"播放名称",prop:"screen_name",minWidth:"160"},{title:"播放类型",prop:"play_type_name",minWidth:"100"},{title:"设备类型",prop:"screen_type_name",minWidth:"100"},{title:"设备选择",prop:"device_name",minWidth:"160"},{title:"素材类型",prop:"show_type_name",minWidth:"100"},{title:"播放次数",prop:"frequency",minWidth:"100"}],tableData:[],hash:"",listId:"",resources:{},grade_auth:!1,method_auth:{actAdd:0,actEdit:0,actDelete:0,getDepartmentList:0},keyword:""}},mounted:function(){this.getList(),this.getHash()},methods:{serchList:function(){this.page=1,this.pageSize=15,this.getList()},handleSizeChange:function(t){this.page=1,this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.page=t,this.getList()},getHash:function(){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.axios.post(o._20,{page_hash:"multimediaManagement"});case 2:1==(a=e.sent).data.code?t.hash=a.data.data:t.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return e.stop()}},e,t)}))()},getList:function(){var t=this;return r()(i.a.mark(function e(){var a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={curr:t.page,pageSize:t.pageSize,keyword:t.keyword},e.next=3,t.axios.post(o._39,a);case 3:1==(s=e.sent).data.code?(t.total=s.data.data.total,t.tableData=s.data.data.data):t.$message({showClose:!0,message:s.data.msg,type:"error"});case 5:case"end":return e.stop()}},e,t)}))()},addBtn:function(){this.$router.push({name:"multimediAdd"})},editBtn:function(t){this.$router.push({name:"multimediAdd",params:{id:t.id}})},handleClose:function(){this.dialogVisible=!1,this.resetForm()},stop:function(t,e){var a=this;return r()(i.a.mark(function s(){var n;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.axios.post(o._40,{id:t.id,state:e,hash:a.hash});case 2:1==(n=s.sent).data.code?a.$message({showClose:!0,message:n.data.msg,type:"success"}):a.$message({showClose:!0,message:n.data.msg,type:"error"}),a.getList(),a.getHash();case 6:case"end":return s.stop()}},s,a)}))()},delBtn:function(t){var e=this;this.$confirm("是否确定删除该播放","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:t};e.axios.post(o._36,a).then(function(t){1==t.data.code?(e.$notify.success({showClose:!0,message:t.data.msg,type:"success"}),(e.total-1)%e.pageSize==0&&e.total>1&&(e.page-=1),e.getList()):e.$notify.error({title:"失败",message:t.data.msg})});e.getHash()}).catch(function(t){e.$notify.error({title:"失败",message:"取消操作"})})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"multimediaManagement"},[a("div",{staticClass:"searchA"},[a("el-input",{attrs:{placeholder:"播放名称",clearable:"",size:"small"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-search"},on:{click:function(e){return t.serchList()}}},[t._v("查询")]),t._v(" "),a("div",{staticClass:"add"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.addBtn}},[t._v("新增播放")])],1)],1),t._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)","max-height":t.tableHeight,size:"medium"}},[t._l(t.tableHead,function(t,e){return[a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.title,"min-width":t.minWidth,"show-overflow-tooltip":!0}})]}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.stop(e.row,1)}}},[t._v("开始播放")]):a("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.stop(e.row,0)}}},[t._v("停止播放")]),t._v(" "),0==e.row.status&&1==e.row.file_source?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.editBtn(e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),0==e.row.status?a("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.delBtn(e.row.id)}}},[t._v("删除")]):t._e()]}}])})],2)],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":t.page,"page-sizes":[15,30,50,100],"page-size":t.pageSize,layout:"prev, pager, next, sizes,total",total:t.total,"hide-on-single-page":t.total<15},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(t){a("9ozK")},"data-v-361eb6f4",null);e.default=d.exports}});
//# sourceMappingURL=38.01e428fb57006a281e63.js.map