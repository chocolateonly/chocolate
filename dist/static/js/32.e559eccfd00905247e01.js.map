{"version":3,"sources":["webpack:///src/views/drillManagement/component/ringtoneConfigurationMusic.vue","webpack:///./src/views/drillManagement/component/ringtoneConfigurationMusic.vue?0ac3","webpack:///./src/views/drillManagement/component/ringtoneConfigurationMusic.vue"],"names":["ringtoneConfigurationMusic","data","contentTitle","ruleForm","screen_name","frequency","screen_type","show_type","rules","required","message","trigger","screenTypeList","showTypeList","playType","showTitle","showTypeVisible","screenVisible","nodeData","showNodeData","defaultProps","children","label","isSelectAll","device_ids","screen","showType","tableHead","title","prop","minWidth","tableHeight","window","innerHeight","total","page","pageSize","tableHeadCopy","baseUrl","keyword","file_ids","hash","previewData","infoId","dis","timestr","mounted","this","$route","params","id","getInfo","getHash","resView","JSON","parse","stringify_default","methods","getRowKey","row","videoClick","e","open","cellClick","column","cell","event","file_type","fixed","file_path","handleSizeChange","newSize","handleCurrentChange","newPage","selectAll","$refs","tree","setCheckedNodes","screenClick","_this","$nextTick","length","getNodeData","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","arr","wrap","_context","prev","next","device_type","axios","post","src_api","sent","code","device_list","_this3","setCheckedKeys","forEach","i","node","getNode","setChecked","push","device_id","item","$message","showClose","msg","type","stop","linChange","_this4","splice","ele","time","index","file_length","timeChange","showClick","_this5","filter","find","multipleTable","toggleRowSelection","goBack","$router","go","_this6","_callee2","_context2","Object","prototype","toString","call","file_list","show_type_list","resetForm","_this7","resetFields","screenSubmit","getCheckedKeys","concat","getHalfCheckedKeys","submitForm","_ref","_this8","validate","_callee3","valid","numRe","api","_context3","RegExp","test","rehearsal_id","localStorage","getItem","join","_x","apply","arguments","_this9","_callee4","datas","_context4","page_hash","del","num","findIndex","_this10","_callee5","_context5","list","split","file_data","value","result","parseInt","y","Math","floor","h","m","s","component_ringtoneConfigurationMusic","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","content","on","back","_v","ref","model","label-width","click","multiple","size","clearable","filterable","placeholder","change","callback","$$v","expression","_l","key","String","_s","_e","staticStyle","margin-right","underline","target","href","$event","visible","width","close-on-click-modal","update:visible","close","display","show-checkbox","check-on-click-node","node-key","props","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/32.e559eccfd00905247e01.js","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <div class=\"school_check\">\r\n            <el-page-header @back=\"goBack\" :content=\"contentTitle\"></el-page-header>\r\n        </div>\r\n        <div class=\"form_body\">\r\n            <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n                <el-form-item label=\"设备选择\">\r\n                    <el-button @click=\"screenClick\">设备选择</el-button>\r\n                </el-form-item>\r\n                <el-form-item label=\"选择素材\">\r\n                    <el-select v-model=\"dis\" multiple size=\"small\" clearable filterable placeholder=\"请选择素材\" @change=\"linChange\">\r\n                        <el-option v-for=\"item in showNodeData\" :label=\"item.title\" :value=\"String(item.id)\" :key=\"item.id\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <div v-if=\"previewData.length>0\">\r\n                        {{'目前播放时长：'+timestr}}\r\n                    </div>\r\n                    <div v-if=\"previewData.length>0\">\r\n                        <template v-for=\"(item,index) in previewData\">\r\n                            <span :key=\"index\" style=\"margin-right:10px\">\r\n                                <el-link :underline=\"false\" target=\"_blank\" type=\"primary\" :href=\"baseUrl+item.file_path\">{{item.title+'.mp3'}}</el-link>\r\n                            </span>\r\n                        </template>\r\n                        <span></span>\r\n                    </div>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">确 定</el-button>\r\n                    <!-- <el-button @click=\"resetForm('ruleForm')\">取 消</el-button> -->\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n        <el-dialog title=\"选择设备\" :visible.sync=\"screenVisible\" width=\"30%\" @close=\"screenVisible=false\" :close-on-click-modal=\"false\">\r\n            <el-form>\r\n                <el-form-item style=\"display: block;\">\r\n                    <el-checkbox v-model=\"isSelectAll\" @change=\"selectAll\">全选/全不选</el-checkbox>\r\n                    <el-tree :data=\"nodeData\" show-checkbox check-on-click-node node-key=\"device_id\" ref=\"tree\" :props=\"defaultProps\">\r\n                    </el-tree>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button @click=\"screenSubmit\">提交</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {\r\n    drillView,\r\n    ringtoneConfigurationGetInfoApi,\r\n    ringtoneConfigurationAddApi,\r\n    ringtoneConfigurationGetEdit,\r\n    hashApi\r\n} from '@/api/index';\r\nexport default {\r\n    data() {\r\n        return {\r\n            contentTitle: '',\r\n            ruleForm: {\r\n                screen_name: '',//播放名称\r\n                frequency: '',//播放次数\r\n                screen_type: '',//设备类型\r\n                show_type: '',//素材类型\r\n            },\r\n            rules: {\r\n                screen_type: [\r\n                    { required: true, message: '请选择设备类型', trigger: 'change' }\r\n                ],\r\n                show_type: [\r\n                    { required: true, message: '请选择素材类型', trigger: 'change' }\r\n                ],\r\n            },\r\n            screenTypeList: [],//设备类型列表\r\n            showTypeList: [],//素材类型列表\r\n            playType: [],//播放类型列表\r\n            showTitle: '选择图片',//素材选择title\r\n            showTypeVisible: false,//素材选择弹窗\r\n            screenVisible: false,\r\n            nodeData: [],//设备树状列表\r\n            showNodeData: [],//素材表格列表\r\n            defaultProps: {\r\n                children: 'children',\r\n                label: 'device_name',\r\n            },\r\n            // tree是否全选，复选框默认状态（）\r\n            isSelectAll: false,\r\n            device_ids: [],\r\n            screen: [],\r\n            showType: [],\r\n            tableHead: [\r\n                { title: '素材名称', prop: 'title', minWidth: '100' },\r\n                { title: '素材时长', prop: 'duration', minWidth: '100' },\r\n            ],\r\n            tableHeight: window.innerHeight - 180,\r\n            total: 0,\r\n            page: 1,\r\n            pageSize: 5,\r\n            tableHeadCopy: [],\r\n            baseUrl: '',\r\n            keyword: '',\r\n            file_ids: [],//素材id\r\n            hash: '',\r\n            previewData: [],\r\n            infoId: '',\r\n            dis: [],\r\n            timestr: '',\r\n        }\r\n    },\r\n    mounted() {\r\n        this.baseUrl = process.env.UPLOADER_URL;\r\n        this.infoId = this.$route.params.id;\r\n        if (this.$route.params.id) {\r\n            this.getInfo(this.infoId)\r\n        }\r\n        this.getHash();\r\n        this.resView()\r\n        this.tableHeadCopy = JSON.parse(JSON.stringify(this.tableHead));\r\n    },\r\n    methods: {\r\n        getRowKey(row) {\r\n            return row.id;\r\n        },\r\n        videoClick(e) {\r\n            window.open(e, '_blank')\r\n        },\r\n        cellClick(row, column, cell, event) {\r\n            if (row.file_type == 2 && column.fixed == 'right') {\r\n                window.open(this.baseUrl + row.file_path, '_blank')\r\n            }\r\n        },\r\n        // 监听 pagesize 改变\r\n        handleSizeChange(newSize) {\r\n            this.page = 1;\r\n            this.pageSize = newSize;\r\n            this.resView();\r\n        },\r\n        // 监听 pagenum 改变\r\n        handleCurrentChange(newPage) {\r\n            this.page = newPage;\r\n            this.resView();\r\n        },\r\n        selectAll() {\r\n            if (this.isSelectAll) {\r\n                // \t设置目前勾选的节点，使用此方法必须设置 node-key 属性\r\n                this.$refs.tree.setCheckedNodes(this.nodeData);\r\n            } else {\r\n                // 全部不选中\r\n                this.$refs.tree.setCheckedNodes([])\r\n            }\r\n        },\r\n        //设备选择\r\n        screenClick() {\r\n            this.resView();\r\n            this.screenVisible = true;\r\n            this.isSelectAll = false;\r\n            this.$nextTick(() => {\r\n                if (this.screen.length > 0) {\r\n                    this.getNodeData(this.screen);\r\n                }\r\n            })\r\n        },\r\n        async getNodeData(e) {\r\n            this.nodeData = [];\r\n            let data = {\r\n                device_type: '4',\r\n                file_type: 3,\r\n                title: this.keyword,\r\n            }\r\n            const res = await this.axios.post(drillView, data)\r\n            if (res.data.code == 1) {\r\n                this.nodeData = res.data.data.device_list;\r\n                if (e) {\r\n                    this.$nextTick(function () {\r\n                        this.$refs.tree.setCheckedKeys([]);\r\n                        e.forEach((i) => {\r\n                            var node = this.$refs.tree.getNode(i);\r\n                            if (node) {\r\n                                this.$refs.tree.setChecked(node, true);\r\n                            }\r\n                        });\r\n                    })\r\n                } else {\r\n                    // 获取所有id 赋值树节点\r\n                    const arr = [];\r\n                    this.nodeData.forEach(data => {\r\n                        arr.push(data.device_id)\r\n                        if (data.children) {\r\n                            data.children.forEach(item => {\r\n                                arr.push(item.device_id)\r\n                            })\r\n                        }\r\n                    });\r\n                    this.$nextTick(function () {\r\n                        this.$refs.tree.setCheckedKeys(arr);\r\n                    })\r\n                }\r\n\r\n            } else {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: res.data.msg,\r\n                    type: \"error\"\r\n                });\r\n            }\r\n        },\r\n        linChange(e) {\r\n            if (e.length > 5) {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: '铃声素材最多选择五个',\r\n                    type: 'error'\r\n                });\r\n                e.splice(4, e.length - 5)\r\n                return\r\n            }\r\n            this.previewData = [];\r\n            e.forEach(ele => {\r\n                this.showNodeData.forEach(item => {\r\n                    if (ele == item.id) {\r\n                        this.previewData.push(item);\r\n                    }\r\n                })\r\n            })\r\n            let time = 0;\r\n            this.previewData.forEach((item, index) => {\r\n                if (typeof item != \"undefined\") {\r\n                    time += item.file_length\r\n                }\r\n            })\r\n            this.timestr = this.timeChange(time)\r\n        },\r\n        //素材选择\r\n        showClick() {\r\n            this.keyword = '';\r\n            this.resView();\r\n            if (this.ruleForm.show_type == 1) {\r\n                this.tableHead = this.tableHead.filter((e => {\r\n                    return e.title !== '素材时长'\r\n                }))\r\n            } else {\r\n                this.tableHead = this.tableHeadCopy;\r\n            }\r\n            this.showTypeVisible = true;\r\n            this.$nextTick(() => {\r\n                this.previewData.forEach(e => {\r\n                    if (typeof (this.showNodeData.find(item => item.id == e.id)) != 'undefined') {\r\n                        this.$refs.multipleTable.toggleRowSelection(this.showNodeData.find(item => item.id == e.id), true);\r\n                    }\r\n\r\n                })\r\n            })\r\n        },\r\n        goBack() {\r\n            this.$router.go(-1);\r\n        },\r\n        async resView() {\r\n            let data = {\r\n                device_type: '4',\r\n                file_type: 3,\r\n                // curr: this.page,\r\n                // pageSize: this.pageSize,\r\n                title: this.keyword,\r\n            }\r\n            const res = await this.axios.post(drillView, data);\r\n            if (res.data.code == 1) {\r\n                this.nodeData = res.data.data.device_list;\r\n                this.showNodeData = Object.prototype.toString.call(res.data.data.file_list) === '[object Object]' ? res.data.data.file_list.data : [];\r\n                // this.total = res.data.data.file_list.total;\r\n                this.showTypeList = res.data.data.show_type_list;\r\n            } else {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: res.data.msg,\r\n                    type: 'error'\r\n                });\r\n            }\r\n        },\r\n        //重置对话框表单\r\n        resetForm() {\r\n            this.ruleForm = {\r\n                screen_name: '',//播放名称\r\n                frequency: '',//播放次数\r\n                screen_type: '',//设备类型\r\n                show_type: '',//素材类型\r\n            };\r\n            this.showType = [];\r\n            this.screen = [];\r\n            this.$nextTick(() => {\r\n                this.$refs['ruleForm'].resetFields();\r\n            })\r\n        },\r\n        ///提交\r\n        screenSubmit() {\r\n            this.screen = this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys());\r\n            this.screenVisible = false;\r\n        },\r\n        //表单提交\r\n        submitForm() {\r\n            this.$refs['ruleForm'].validate(async valid => {\r\n                if (valid) {\r\n                    await this.getHash();\r\n                    let numReg = /^[0-9]*$/\r\n                    let numRe = new RegExp(numReg)\r\n                    let arr = [];\r\n                    this.screen.forEach(e => {\r\n                        if (numRe.test(e)) {\r\n                            arr.push(e);\r\n                        }\r\n                    })\r\n                    let data = {\r\n                        rehearsal_id: JSON.parse(localStorage.getItem(\"Rehearsal_Id\")),\r\n                        file_ids: this.dis.join(','),\r\n                        device_ids: arr.join(','),\r\n                        hash: this.hash,\r\n                    };\r\n                    let api;\r\n                    if (typeof this.infoId != 'undefined') {\r\n                        api = ringtoneConfigurationGetEdit;\r\n                        data.id = this.infoId;\r\n                    } else {\r\n                        api = ringtoneConfigurationAddApi;\r\n                    }\r\n                    const res = await this.axios.post(api, data);\r\n                    if (res.data.code == 1) {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            message: res.data.msg,\r\n                            type: 'success'\r\n                        });\r\n                        this.$router.push('/drillManAdd')\r\n                    } else {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            message: res.data.msg,\r\n                            type: 'error'\r\n                        });\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        async getHash() {\r\n            const datas = {\r\n                page_hash: 'multimediAdd'\r\n            };\r\n            const res = await this.axios.post(hashApi, datas);\r\n            if (res.data.code == 1) {\r\n                this.hash = res.data.data;\r\n            } else {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: res.data.msg,\r\n                    type: 'error'\r\n                });\r\n            }\r\n        },\r\n        del(item, index) {\r\n            let num = this.file_ids.findIndex(i => i == item.id);\r\n            this.file_ids.splice(num, 1)\r\n            this.previewData.splice(index, 1);\r\n            let time = 0;\r\n            this.previewData.forEach((e, index) => {\r\n                if (typeof e != \"undefined\") {\r\n                    if (e.file_type == 2) {\r\n                        time += e.file_length\r\n                    }\r\n                }\r\n            })\r\n            this.timestr = this.timeChange(time)\r\n        },\r\n        async getInfo(id) {\r\n            const res = await this.axios.post(ringtoneConfigurationGetInfoApi, { id: id });\r\n            if (res.data.code == 1) {\r\n                this.ruleForm = res.data.data;\r\n                this.device_ids = res.data.data.list\r\n                this.screen = res.data.data.list\r\n                this.dis = res.data.data.file_ids.length > 0 ? res.data.data.file_ids.split(',') : [];\r\n                this.previewData = res.data.data.file_data;\r\n                let time = 0;\r\n                this.previewData.forEach((item, index) => {\r\n                    if (typeof item != \"undefined\") {\r\n                        time += item.file_length\r\n                    }\r\n                })\r\n                this.timestr = this.timeChange(time)\r\n                this.resView()\r\n            } else {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: res.data.msg,\r\n                    type: 'error'\r\n                });\r\n            }\r\n        },\r\n        timeChange(value) {\r\n            let result = parseInt(value);\r\n            let y = Math.floor(result / 86400) < 10 ? \"0\" + Math.floor(result / 86400) : Math.floor(result / 86400);\r\n\r\n            let h = Math.floor((result / 3600) % 24) < 10 ? \"0\" + Math.floor((result / 3600) % 24) : Math.floor((result / 3600) % 24);\r\n\r\n            let m = Math.floor((result / 60) % 60) < 10 ? \"0\" + Math.floor((result / 60) % 60) : Math.floor((result / 60) % 60);\r\n\r\n            let s = Math.floor(result % 60) < 10 ? \"0\" + Math.floor(result % 60) : Math.floor(result % 60);\r\n\r\n            let res = \"\";\r\n            if (y !== \"00\") res += `${y}天`;\r\n\r\n            if (h !== \"00\") res += `${h}时`;\r\n\r\n            if (m !== \"00\") res += `${m}分`;\r\n\r\n            res += `${s}秒`;\r\n\r\n            return res;\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped lang='scss'>\r\n.school_check {\r\n    height: 60px;\r\n    padding: 0 24px;\r\n    background: #fff;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.form_body {\r\n    width: 30%;\r\n    margin-left: 30%;\r\n    .el-form {\r\n        padding: 20px;\r\n        .el-select {\r\n            width: 100%;\r\n        }\r\n    }\r\n}\r\n.par {\r\n    position: relative;\r\n    .son {\r\n        position: absolute;\r\n        top: 0px;\r\n        right: 0px;\r\n    }\r\n    .sonv {\r\n        right: -8%;\r\n        position: absolute;\r\n        top: 0px;\r\n    }\r\n}\r\n/deep/.el-dialog__body {\r\n    height: 500px;\r\n}\r\n.table {\r\n    height: 500px;\r\n    overflow: overlay;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/drillManagement/component/ringtoneConfigurationMusic.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"school_check\"},[_c('el-page-header',{attrs:{\"content\":_vm.contentTitle},on:{\"back\":_vm.goBack}})],1),_vm._v(\" \"),_c('div',{staticClass:\"form_body\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"设备选择\"}},[_c('el-button',{on:{\"click\":_vm.screenClick}},[_vm._v(\"设备选择\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"选择素材\"}},[_c('el-select',{attrs:{\"multiple\":\"\",\"size\":\"small\",\"clearable\":\"\",\"filterable\":\"\",\"placeholder\":\"请选择素材\"},on:{\"change\":_vm.linChange},model:{value:(_vm.dis),callback:function ($$v) {_vm.dis=$$v},expression:\"dis\"}},_vm._l((_vm.showNodeData),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.title,\"value\":String(item.id)}})}),1)],1),_vm._v(\" \"),_c('el-form-item',[(_vm.previewData.length>0)?_c('div',[_vm._v(\"\\n                    \"+_vm._s('目前播放时长：'+_vm.timestr)+\"\\n                \")]):_vm._e(),_vm._v(\" \"),(_vm.previewData.length>0)?_c('div',[_vm._l((_vm.previewData),function(item,index){return [_c('span',{key:index,staticStyle:{\"margin-right\":\"10px\"}},[_c('el-link',{attrs:{\"underline\":false,\"target\":\"_blank\",\"type\":\"primary\",\"href\":_vm.baseUrl+item.file_path}},[_vm._v(_vm._s(item.title+'.mp3'))])],1)]}),_vm._v(\" \"),_c('span')],2):_vm._e()]),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"确 定\")])],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"选择设备\",\"visible\":_vm.screenVisible,\"width\":\"30%\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.screenVisible=$event},\"close\":function($event){_vm.screenVisible=false}}},[_c('el-form',[_c('el-form-item',{staticStyle:{\"display\":\"block\"}},[_c('el-checkbox',{on:{\"change\":_vm.selectAll},model:{value:(_vm.isSelectAll),callback:function ($$v) {_vm.isSelectAll=$$v},expression:\"isSelectAll\"}},[_vm._v(\"全选/全不选\")]),_vm._v(\" \"),_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.nodeData,\"show-checkbox\":\"\",\"check-on-click-node\":\"\",\"node-key\":\"device_id\",\"props\":_vm.defaultProps}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":_vm.screenSubmit}},[_vm._v(\"提交\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4cb42610\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/drillManagement/component/ringtoneConfigurationMusic.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4cb42610\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ringtoneConfigurationMusic.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ringtoneConfigurationMusic.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ringtoneConfigurationMusic.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4cb42610\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ringtoneConfigurationMusic.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4cb42610\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/drillManagement/component/ringtoneConfigurationMusic.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}