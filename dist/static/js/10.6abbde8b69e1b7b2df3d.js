webpackJsonp([10],{"1b+9":function(t,e){},jI63:function(t,e){},tP2R:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),s=a("exGp"),r=a.n(s),o=a("gyMJ"),l={data:function(){return{total:0,pageNum:1,pageSize:15,totalInfo:0,pageNumInfo:1,pageSizeInfo:10,isLoading:!1,tableHeight:window.innerHeight-180,formData:{fee_type:"",fee_total:""},formInfo:{},method_auth:{},editId:"",title:"",search:{fee_type:""},dialogVisible:!1,dialogVisibleCheck:!1,tableHead:[{title:"ID",prop:"id",minWidth:"100"},{title:"缴费类型",prop:"fee_type_name",minWidth:"120"},{title:"应缴金额",prop:"fee_total",minWidth:"100"},{title:"预计缴费人数",prop:"predict_count",minWidth:"120"},{title:"预计费用",prop:"predict_fee",minWidth:"150"},{title:"已交人数",prop:"pay_count",minWidth:"150"},{title:"已交费用",prop:"pay_fee",minWidth:"150"},{title:"未交费用",prop:"unpay_fee",minWidth:"150"},{title:"创建日期",prop:"create_time",minWidth:"150"}],tableHeads:[{title:"ID",prop:"id",minWidth:"100"},{title:"学生姓名",prop:"student_name",minWidth:"120"},{title:"应缴金额",prop:"payable_fee",minWidth:"100"},{title:"缴费状态",prop:"pay_status_name",minWidth:"120"},{title:"已缴费用",prop:"pay_fee",minWidth:"150"}],rule:{fee_total:[{required:!0,message:"请输入缴费金额",trigger:"blur"}],fee_type:[{required:!0,message:"请选择缴费类型",trigger:["blur","change"]}]},tableData:[],tableDataInfo:[],hash:"",fee_type_list:[]}},mounted:function(){this.getList(),this.resView(),this.getHash()},methods:{formatDecimal:function(t,e){if(!(t=String(t)).trim())return t;var a=t.substr(0,1),i=t.substr(1,1);if(t.length>1&&0===a&&"."!==i&&(t=t.substr(1,1)),"."===a&&(t=""),-1!==t.indexOf(".")){var n=t.substr(t.indexOf(".")+1);-1!==n.indexOf(".")&&(t=t.substr(0,t.indexOf(".")+n.indexOf(".")+1))}if(t=t.replace(/[^\d^.]+/g,""),e||0===e){var s=t.split(".")[1];s&&s.length>e&&(s=s.substr(0,e),t=t.split(".")[0]+"."+s)}return t},serchList:function(){this.pageNum=1,this.pageSize=15,this.getList()},handleSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.pageNum=t,this.getList()},handleSizeChangeInfo:function(t){this.pageNumInfo=1,this.pageSizeInfo=t,this.studentList()},handleCurrentChangeInfo:function(t){this.pageNumInfo=t,this.studentList()},studentList:function(){var t=this;return r()(n.a.mark(function e(){var a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={curr:t.pageNumInfo,pageSize:t.pageSizeInfo,id:localStorage.getItem("StudentList_id")},e.next=3,t.axios.post(o._49,a);case 3:1==(i=e.sent).data.code?(t.tableDataInfo=i.data.data.data,t.totalInfo=i.data.data.total,t.formInfo=i.data.data.basic):t.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return e.stop()}},e,t)}))()},resView:function(){var t=this;return r()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.axios.post(o._50);case 2:1==(a=e.sent).data.code?t.fee_type_list=a.data.data.fee_type_list:t.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return e.stop()}},e,t)}))()},getList:function(){var t=this;return r()(n.a.mark(function e(){var a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={curr:t.pageNum,pageSize:t.pageSize,fee_type:t.search.fee_type},e.next=3,t.axios.post(o._48,a);case 3:1==(i=e.sent).data.code?(t.tableData=i.data.data.data,t.total=i.data.data.total):t.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return e.stop()}},e,t)}))()},addBtn:function(){this.title="新增缴费",this.dialogVisible=!0,this.resetForm()},edit:function(t){var e=this;this.title="编辑缴费",this.dialogVisible=!0,this.resetForm(),this.$nextTick(function(){e.getInfo(t.id)})},check:function(t){var e=this;localStorage.setItem("StudentList_id",t.id),this.dialogVisibleCheck=!0,this.$nextTick(function(){e.studentList()})},getHash:function(){var t=this;return r()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.axios.post(o._20,{page_hash:"payManagement"});case 2:1==(a=e.sent).data.code?t.hash=a.data.data:t.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return e.stop()}},e,t)}))()},getInfo:function(t){var e=this;return r()(n.a.mark(function a(){var i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.axios.post(o._47,{id:t});case 2:1==(i=a.sent).data.code?(i.data.data.fee_type=String(i.data.data.fee_type),e.formData=i.data.data):e.$message({showClose:!0,message:i.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,e)}))()},resetForm:function(){var t=this;this.formData={fee_type:"",fee_total:""},this.$nextTick(function(){t.$refs.formData.resetFields()})},submit:function(){var t,e=this;this.$refs.formData.validate((t=r()(n.a.mark(function t(a){var i,s,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.next=3,e.getHash();case 3:return i={fee_type:e.formData.fee_type,fee_total:e.formData.fee_total,hash:e.hash},s=void 0,"新增缴费"==e.title?s=o._44:(s=o._46,i.id=e.formData.id),t.next=8,e.axios.post(s,i);case 8:1==(r=t.sent).data.code?(e.$message({showClose:!0,message:r.data.msg,type:"success"}),e.dialogVisible=!1):e.$message({showClose:!0,message:r.data.msg,type:"error"}),e.getList(),e.getHash();case 12:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},delBtn:function(t){var e=this;this.$confirm("是否确定删除","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:t,hash:e.hash};e.axios.post(o._45,a).then(function(t){1==t.data.code?(e.$notify.success({showClose:!0,message:t.data.msg,type:"success"}),(e.total-1)%e.pageSize==0&&e.total>1&&(e.page-=1),e.getList()):e.$notify.error({title:"失败",message:t.data.msg})});e.getHash()}).catch(function(t){})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"payManagement"},[a("div",{staticClass:"searchA"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},model:{value:t.search.fee_type,callback:function(e){t.$set(t.search,"fee_type",e)},expression:"search.fee_type"}},t._l(t.fee_type_list,function(t){return a("el-option",{key:t.dictionary_value,attrs:{label:t.dictionary_name,value:t.dictionary_value}})}),1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-search"},on:{click:function(e){return t.serchList()}}},[t._v("查询")]),t._v(" "),a("div",{staticClass:"add"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.addBtn()}}},[t._v("新增缴费")])],1)],1),t._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)",size:"medium","max-height":t.tableHeight}},[t._l(t.tableHead,function(t,e){return[a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.title,"show-overflow-tooltip":!0,"min-width":t.minWidth}})]}),t._v(" "),a("el-table-column",{attrs:{prop:"address",align:"center",label:"操作",fixed:"right",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.check(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.delBtn(e.row.id)}}},[t._v("删除")])]}}])})],2),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":t.pageNum,"page-sizes":[15,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next",total:t.total,"hide-on-single-page":t.total<15},on:{"update:currentPage":function(e){t.pageNum=e},"update:current-page":function(e){t.pageNum=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:t.title,visible:t.dialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,size:"medium",rules:t.rule,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"缴费类型",prop:"fee_type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择缴费类型"},model:{value:t.formData.fee_type,callback:function(e){t.$set(t.formData,"fee_type",e)},expression:"formData.fee_type"}},t._l(t.fee_type_list,function(t){return a("el-option",{key:t.dictionary_value,attrs:{label:t.dictionary_name,value:t.dictionary_value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"应缴金额",prop:"fee_total"}},[a("el-input",{attrs:{type:"text",size:"small",maxlength:"7",placeholder:"请输入缴费金额"},on:{input:function(e){t.formData.fee_total=t.formatDecimal(t.formData.fee_total,2)}},model:{value:t.formData.fee_total,callback:function(e){t.$set(t.formData,"fee_total","string"==typeof e?e.trim():e)},expression:"formData.fee_total"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"查看",visible:t.dialogVisibleCheck,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisibleCheck=e}}},[a("el-descriptions",{attrs:{direction:"vertical",column:7,border:""}},[a("el-descriptions-item",{attrs:{label:"缴费类型"}},[t._v(t._s(t.formInfo.fee_type_name))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"应缴金额"}},[t._v(t._s(t.formInfo.payable_fee))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"预计缴费人数"}},[t._v(t._s(t.formInfo.predict_count))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"预计费用"}},[t._v(t._s(t.formInfo.predict_fee))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"已交人数"}},[t._v(t._s(t.formInfo.pay_count))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"已交费用"}},[t._v(t._s(t.formInfo.pay_fee))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"未交费用"}},[t._v(t._s(t.formInfo.unpay_fee))])],1),t._v(" "),a("div",{staticClass:"home_table",staticStyle:{"margin-top":"10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataInfo,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)",size:"medium"}},[t._l(t.tableHeads,function(t,e){return[a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.title,"show-overflow-tooltip":!0,"min-width":t.minWidth}})]})],2),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":t.pageNumInfo,"page-sizes":[10,20,30,50],"page-size":t.pageSizeInfo,layout:"total, sizes, prev, pager, next",total:t.totalInfo,"hide-on-single-page":t.totalInfo<10},on:{"update:currentPage":function(e){t.pageNumInfo=e},"update:current-page":function(e){t.pageNumInfo=e},"size-change":t.handleSizeChangeInfo,"current-change":t.handleCurrentChangeInfo}})],1)],1)],1)],1)])},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(t){a("jI63"),a("1b+9")},"data-v-af30f136",null);e.default=d.exports}});
//# sourceMappingURL=10.6abbde8b69e1b7b2df3d.js.map