webpackJsonp([45],{Vr4n:function(e,t){},lQTZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),s=a("exGp"),r=a.n(s),o=a("gyMJ"),l={data:function(){return{total:0,page:1,pageSize:15,tableHeight:window.innerHeight-180,dialogVisible:!1,visible:!1,title:"",search:{keyword:"",scene:""},formData:{video:{},image:{}},equipment:[],tableHead:[{title:"序号",prop:"id",minWidth:"100"},{title:"演练名称",prop:"title",minWidth:"120"},{title:"事件类型",prop:"scene_name",minWidth:"120"},{title:"时间",prop:"create_time",minWidth:"200"},{title:"人员任务",prop:"person",minWidth:"180"},{title:"预警次数",prop:"warn_count",minWidth:"120"}],tableHeadTask:[{title:"序号",prop:"id",minWidth:"80"},{title:"参与人员",prop:"real_name",minWidth:"100"},{title:"人员任务",prop:"task",minWidth:"100"},{title:"演练确定",prop:"status",minWidth:"100"}],tableData:[],tableDataTask:[],sceneList:[],baseUrl:"",task:{},checkInfo:{}}},mounted:function(){this.baseUrl="http://xwcs.xyruxue.com/",this.getList(),this.resView()},methods:{serchList:function(){this.page=1,this.pageSize=15,this.getList()},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.page=e,this.getList()},getList:function(){var e=this;return r()(n.a.mark(function t(){var a,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={curr:e.page,pageSize:e.pageSize,keyword:e.search.keyword,scene:e.search.scene},t.next=3,e.axios.post(o.W,a);case 3:1==(i=t.sent).data.code?(e.tableData=i.data.data.data,e.total=i.data.data.total):e.$message({showClose:!0,message:i.data.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},resView:function(){var e=this;return r()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post(o.Y);case 2:1==(a=t.sent).data.code?e.sceneList=a.data.data.scene_list:e.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return t.stop()}},t,e)}))()},viewTask:function(e){var t=this;this.dialogVisible=!0,this.tableDataTask=[],this.task={},this.$nextTick(function(){t.taskInfo(e.id)})},taskInfo:function(e){var t=this;return r()(n.a.mark(function a(){var i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.axios.post(o.X,{id:e});case 2:1==(i=a.sent).data.code?(t.tableDataTask=i.data.data.list,t.task=i.data.data):t.$message({showClose:!0,message:i.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,t)}))()},check:function(e){var t=this;this.visible=!0,this.checkInfo={},this.$nextTick(function(){t.getInfo(e.id)})},getInfo:function(e){var t=this;return r()(n.a.mark(function a(){var i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.axios.post(o.V,{id:e});case 2:1==(i=a.sent).data.code?t.checkInfo=i.data.data:t.$message({showClose:!0,message:i.data.msg,type:"error"});case 4:case"end":return a.stop()}},a,t)}))()},videoClick:function(e){window.open(e,"_blank")}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"drillResult"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"请输入演练名称",clearable:"",size:"small"},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}}),e._v(" "),a("el-select",{attrs:{clearable:"",size:"small",placeholder:"请选择事件类型"},model:{value:e.search.scene,callback:function(t){e.$set(e.search,"scene",t)},expression:"search.scene"}},e._l(e.sceneList,function(e){return a("el-option",{key:e.dictionary_value,attrs:{label:e.dictionary_name,value:e.dictionary_value}})}),1),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-search"},on:{click:function(t){return e.serchList()}}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)","max-height":e.tableHeight,size:"medium"}},[e._l(e.tableHead,function(t,i){return["create_time"==t.prop?a("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.title,"min-width":t.minWidth,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.create_time+"-"+t.row.end_time)+"\n                    ")]}}],null,!0)}):"person"==t.prop?a("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.title,"min-width":t.minWidth,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.viewTask(t.row)}}},[e._v("查看任务")])]}}],null,!0)}):a("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.title,"min-width":t.minWidth,"show-overflow-tooltip":!0}})]}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.check(t.row)}}},[e._v("查看详情")])]}}])})],2)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.page,"page-sizes":[15,30,50,100],"page-size":e.pageSize,layout:"prev, pager, next, sizes,total",total:e.total,"hide-on-single-page":e.total<15},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"人员任务",visible:e.dialogVisible,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[String(e.task.person_total).length>0?a("span",[e._v("参与人员："+e._s(e.task.person_total))]):e._e(),e._v(" "),String(e.task.person_confirm).length>0?a("span",[e._v("演练确定人员："+e._s(e.task.person_confirm))]):e._e(),e._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataTask,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)","max-height":e.tableHeight,size:"medium"}},[e._l(e.tableHeadTask,function(t,i){return["status"==t.prop?a("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.title,"min-width":t.minWidth,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(1==t.row.status?"已确定":"未确定")+"\n                        ")]}}],null,!0)}):a("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.title,"min-width":t.minWidth,"show-overflow-tooltip":!0}})]})],2)],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"查看详情",visible:e.visible,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[a("el-descriptions",{attrs:{column:1}},[a("el-descriptions-item",{attrs:{label:"演练名称"}},[e._v(e._s(e.checkInfo.title))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"事件类型"}},[e._v(e._s(e.checkInfo.scene_name))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"时间"}},[e._v(e._s(e.checkInfo.create_time+"-"+e.checkInfo.end_time))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"参与人员"}},[e._v(e._s(String(e.checkInfo.person_total).length>0?e.checkInfo.person_total+"个":""))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"演练确定人员"}},[e._v(e._s(String(e.checkInfo.person_confirm).length>0?e.checkInfo.person_confirm+"个":""))]),e._v(" "),e._l(e.checkInfo.warn_list,function(t,i){return[a("el-descriptions-item",{key:i,attrs:{label:"预警事件"}},[e._v(e._s(t.warn_type_name))]),e._v(" "),a("el-descriptions-item",{key:i,attrs:{label:"预警次数"}},[e._v(e._s(String(t.warn_count).length>0?t.warn_count+"次":""))]),e._v(" "),e._l(t.list,function(e,t){return a("el-descriptions-item",{key:t,attrs:{label:"预警文件"}},[a("el-image",{staticStyle:{width:"100px",height:"100px","margin-right":"5px"},attrs:{src:e.image_url,"preview-src-list":[e.image_url]}})],1)})]})],2)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(e){a("Vr4n")},"data-v-0c3f0c7c",null);t.default=d.exports}});
//# sourceMappingURL=45.1610452d452efa9c96ee.js.map