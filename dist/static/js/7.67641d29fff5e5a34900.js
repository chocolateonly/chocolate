webpackJsonp([7],{"0IOi":function(t,e){},"6DCo":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("bOdI"),r=a.n(i),n=a("Xxa5"),o=a.n(n),s=a("exGp"),l=a.n(s),d=a("gyMJ"),m={data:function(){return{total:0,pageNum:1,pageSize:1e3,isLoading:!1,tableHeight:window.innerHeight-180,node_type:0,formData:{node_name:"",icon:"",remarks:"",router_path:"",file_path:"",order_num:"",controller_name:"",method_name:"",module_name:"",authority:1,signin:1,displayed:1},method_auth:{},editId:"",title:"",dialogVisible:!1,rule:{node_name:[{required:!0,message:"请输入资源名称",trigger:"blur"}],order_num:[{required:!0,message:"请输入列表排序",trigger:"blur"}]},tableHead:[{title:"资源名称",prop:"node_name"},{title:"资源类型",prop:"node_type"},{title:"控制器名",prop:"controller_name"},{title:"方法名称",prop:"method_name"}],tableData:[],hashData:"",parent_id:""}},mounted:function(){this.getListData()},methods:{handleSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getListData()},handleCurrentChange:function(t){this.pageNum=t,this.getListData()},getHashData:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.axios.post(d._20,{page_hash:"dataDictionary"});case 2:1==(a=e.sent).data.code?t.hashData=a.data.data:t.$message({showClose:!0,message:a.data.msg,type:"error"});case 4:case"end":return e.stop()}},e,t)}))()},submitForm:function(t){var e,a=this;this.$refs[t].validate((e=l()(o.a.mark(function t(e){var i,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=9;break}return i={node_type:a.node_type,node_name:a.formData.node_name,icon:a.formData.icon,router_path:a.formData.router_path,file_path:a.formData.file_path,order_num:a.formData.order_num,controller_name:a.formData.controller_name,method_name:a.formData.method_name,module_name:a.formData.module_name,authority:a.formData.authority,displayed:a.formData.displayed,remarks:a.formData.remarks,signin:a.formData.signin,abreast:0,color_set:"",defaulted:0,router_name:"",hash:a.hashData},-1!=a.title.indexOf("新增")?(r=d._76,i.parent_id=a.parent_id):"编辑"==a.title&&(r=d._78,i.id=a.editId),t.next=5,a.axios.post(r,i);case 5:1==(n=t.sent).data.code?(a.dialogVisible=!1,a.tableData=[],a.$nextTick(function(){a.getListData()})):(a.getHashData(),a.$message({showClose:!0,message:n.data.msg,type:"error"})),t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}},t,a)})),function(t){return e.apply(this,arguments)}))},resetForm:function(){this.node_type=0,this.formData={node_name:"",icon:"",router_path:"",file_path:"",order_num:"",controller_name:"",method_name:"",module_name:"",authority:1,signin:1,displayed:1,remarks:""}},addBtn:function(t,e){this.dialogVisible=!0,1==t?(this.parent_id=e,this.title="新增父级资源"):(this.parent_id=e.id,this.title="新增"+e.node_name+"下级资源"),this.getHashData(),this.resetForm()},editBtn:function(t){var e=this;this.title="编辑",this.dialogVisible=!0,this.node_type=t.node_type,this.formData={node_name:t.node_name,icon:t.icon,router_path:t.router_path,file_path:t.file_path,order_num:t.order_num,controller_name:t.controller_name,method_name:t.method_name,module_name:t.module_name,authority:t.authority,signin:t.signin,displayed:t.displayed,remarks:t.remarks},this.editId=t.id,this.getHashData(),this.$nextTick(function(){e.$refs.formData.clearValidate()})},delBtn:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(l()(o.a.mark(function a(){var i,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={id:t},a.next=3,e.axios.post(d._77,i);case 3:1==(r=a.sent).data.code?(e.tableData=[],e.$nextTick(function(){e.getListData()}),e.$message({showClose:!0,message:"删除成功",type:"success"})):e.$message({showClose:!0,message:r.data.msg,type:"error"});case 5:case"end":return a.stop()}},a,e)}))).catch(function(){e.$message({type:"info",message:"已取消删除"})});case 1:case"end":return a.stop()}},a,e)}))()},getListData:function(){var t=this;return l()(o.a.mark(function e(){var i,n,s,l,m,c,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,i={curr:t.pageNum,pagesize:1e3},e.next=4,t.axios.post(d._79,i);case 4:n=e.sent,1==(s=n.data).code?(l=function t(e){e.forEach(function(e){c.forEach(function(t,i){if(t.parent_id&&t.parent_id===e.meta.id){var n;e.children||(e.children=[]),t.fullPath=e.meta.fullPath+"/"+t.path;var o=e.path+"/"+t.router_path+"/index",s=(n={component:function(){return a("PRBW")("./views"+o)},router_path:t.router_path,redirect:"noRedirect",node_name:t.node_name,icon:t.icon,id:t.id,abreast:t.abreast,authority:t.authority,class_name:t.class_name,color_set:t.color_set,controller_name:t.controller_name,defaulted:t.defaulted,displayed:t.displayed,file_path:t.file_path,mainsort:t.mainsort,method_name:t.method_name,module_name:t.module_name},r()(n,"node_name",t.node_name),r()(n,"node_type",t.node_type),r()(n,"order_num",t.order_num),r()(n,"parent_id",t.parent_id),r()(n,"remarks",t.remarks),r()(n,"router_name",t.router_name),r()(n,"router_path",t.router_path),r()(n,"signin",t.signin),r()(n,"meta",{id:t.id,title:t.title}),n);e.children.push(s)}}),e.children&&t(e.children)})},m=function(t){var e=!1;return c.forEach(function(a,i){a.parent_id&&a.parent_id===t&&(e=!0)}),e},c=s.data.data,u=[],c.forEach(function(t,e){if(0===t.parent_id){var i,n=(i={router_path:t.router_path,redirect:"noRedirect",node_name:t.node_name,icon:t.icon,id:t.id,abreast:t.abreast,authority:t.authority,class_name:t.class_name,color_set:t.color_set,controller_name:t.controller_name,defaulted:t.defaulted,displayed:t.displayed,file_path:t.file_path,mainsort:t.mainsort,method_name:t.method_name,module_name:t.module_name},r()(i,"node_name",t.node_name),r()(i,"node_type",t.node_type),r()(i,"order_num",t.order_num),r()(i,"parent_id",t.parent_id),r()(i,"remarks",t.remarks),r()(i,"router_name",t.router_name),r()(i,"router_path",t.router_path),r()(i,"signin",t.signin),r()(i,"meta",{id:t.id,title:t.title,icon:t.icon}),i);m(t.id)&&(n.children=[{path:"",component:function(){return a("mHk5")("./"+t.router_path+"/index")},meta:{title:t.title}}],n.children.splice(0,1)),u.push(n)}}),l(u),t.tableData=u,t.isLoading=!1):(t.isLoading=!1,t.$message({showClose:!0,message:s.msg,type:"error"}));case 7:case"end":return e.stop()}},e,t)}))()}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"resourceManagement"},[a("div",{staticClass:"searchA"},[a("div",{staticClass:"add"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addBtn(1,0)}}},[t._v("新增")])],1)]),t._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-background":"rgba(0, 0, 0, 0.4)",size:"medium","row-key":"id","max-height":t.tableHeight,"tree-props":{children:"children"}}},[t._l(t.tableHead,function(e,i){return["node_type"==e.prop?a("el-table-column",{key:i,attrs:{prop:e.prop,label:e.title,width:e.width,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.displayed?a("span",[t._v("菜单资源")]):0==e.row.displayed?a("span",[t._v("页面资源")]):t._e()]}}],null,!0)}):a("el-table-column",{key:i,attrs:{prop:e.prop,label:e.title,"show-overflow-tooltip":!0,width:e.widthS}})]}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{color:"#67c23a"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.addBtn(2,e.row)}}},[t._v("新增下级资源")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.editBtn(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticStyle:{color:"#ff2b2b"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.delBtn(e.row.id)}}},[t._v("删除")])]}}])})],2),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":t.pageNum,"page-sizes":[15,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next",total:t.total,"hide-on-single-page":t.total<15},on:{"update:currentPage":function(e){t.pageNum=e},"update:current-page":function(e){t.pageNum=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),t.dialogVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"dialogStyle",attrs:{title:t.title,visible:t.dialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[a("el-form",{ref:"formData",staticClass:"demo-ruleForm",attrs:{model:t.formData,rules:t.rule}},[a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{prop:"node_name",label:"资源名称"}},[a("el-input",{attrs:{placeholder:"请输入资源名称",size:"small"},model:{value:t.formData.node_name,callback:function(e){t.$set(t.formData,"node_name",e)},expression:"formData.node_name"}})],1)],1)]),t._v(" "),a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{prop:"icon",label:"资源图标"}},[a("el-input",{attrs:{placeholder:"请输入资源图标",size:"small"},model:{value:t.formData.icon,callback:function(e){t.$set(t.formData,"icon",e)},expression:"formData.icon"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{label:"路由路径"}},[a("el-input",{attrs:{placeholder:"请输入路由路径",size:"small"},model:{value:t.formData.router_path,callback:function(e){t.$set(t.formData,"router_path",e)},expression:"formData.router_path"}})],1)],1)]),t._v(" "),a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{prop:"order_num",label:"列表排序"}},[a("el-input",{attrs:{placeholder:"请输入列表排序",size:"small"},model:{value:t.formData.order_num,callback:function(e){t.$set(t.formData,"order_num",e)},expression:"formData.order_num"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{label:"控制器名"}},[a("el-input",{attrs:{placeholder:"请输入控制器名",size:"small"},model:{value:t.formData.controller_name,callback:function(e){t.$set(t.formData,"controller_name",e)},expression:"formData.controller_name"}})],1)],1)]),t._v(" "),a("div",{staticClass:"padd"},[a("div",[a("el-form-item",{attrs:{label:"方法名称"}},[a("el-input",{attrs:{placeholder:"请输入方法名称",size:"small"},model:{value:t.formData.method_name,callback:function(e){t.$set(t.formData,"method_name",e)},expression:"formData.method_name"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"dialogInput dialogInput1"},[a("div",{staticClass:"padd"},[a("div",{staticClass:"paddTit"},[t._v("模块名称")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入模块名称",size:"small"},model:{value:t.formData.module_name,callback:function(e){t.$set(t.formData,"module_name",e)},expression:"formData.module_name"}})],1),t._v(" "),a("div",{staticClass:"padd"},[a("div",{staticClass:"paddTit"},[t._v("文件路径")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入客户端文件路径",size:"small"},model:{value:t.formData.file_path,callback:function(e){t.$set(t.formData,"file_path",e)},expression:"formData.file_path"}})],1)]),t._v(" "),a("div",{staticClass:"dialogInput dialogInput1"},[a("div",{staticClass:"padd"},[a("div",{staticClass:"paddTit"},[t._v("鉴权控制")]),t._v(" "),a("el-switch",{staticClass:"switch",attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.authority,callback:function(e){t.$set(t.formData,"authority",e)},expression:"formData.authority"}})],1),t._v(" "),a("div",{staticClass:"padd"},[a("div",{staticClass:"paddTit"},[t._v("需要登录")]),t._v(" "),a("el-switch",{staticClass:"switch",attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.signin,callback:function(e){t.$set(t.formData,"signin",e)},expression:"formData.signin"}})],1),t._v(" "),a("div",{staticClass:"padd"},[a("div",{staticClass:"paddTit"},[t._v("菜单显示")]),t._v(" "),a("el-switch",{staticClass:"switch",attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.displayed,callback:function(e){t.$set(t.formData,"displayed",e)},expression:"formData.displayed"}})],1),t._v(" "),a("div",{staticClass:"padd"},[a("div",{staticClass:"paddTit"},[t._v("资源分类")]),t._v(" "),a("el-radio-group",{staticStyle:{width:"200px"},model:{value:t.node_type,callback:function(e){t.node_type=e},expression:"node_type"}},[a("el-radio",{attrs:{label:0}},[t._v("电脑端")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("手机端")])],1)],1)]),t._v(" "),a("div",{staticClass:"dialogInput"},[a("div",{staticClass:"padd"},[a("div",{staticClass:"paddTit"},[t._v("资源说明")]),t._v(" "),a("div",[a("el-form-item",[a("el-input",{attrs:{type:"textarea",placeholder:"请输入资源说明(100个字符以内)",maxlength:"100",autosize:{minRows:2,maxRows:4}},model:{value:t.formData.remarks,callback:function(e){t.$set(t.formData,"remarks",e)},expression:"formData.remarks"}})],1)],1)])]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("formData")}}},[t._v("确 定")])],1)])],1)]):t._e()],1)])},staticRenderFns:[]};var u=a("VU/8")(m,c,!1,function(t){a("GmRC"),a("0IOi")},"data-v-ef5a1974",null);e.default=u.exports},GmRC:function(t,e){}});
//# sourceMappingURL=7.67641d29fff5e5a34900.js.map